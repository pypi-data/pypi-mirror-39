(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getLayer=y;var o=d(n(1)),a=d(n(0)),i=n(2532),u=d(n(2536)),l=d(n(2542)),s=n(2629),f=n(2525),c=n(2537),p=d(n(2526));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var v=250;function y(e,t,n,r,o,a){var u=e,l=u.fill_color_picker,c=u.stroke_color_picker,d=[].concat(h(t.data.features));if(null!=a&&a.forEach(function(e){d=d.filter(e)}),u.js_data_mutator){var v=(0,p.default)(u.js_data_mutator);d=v(d)}var y=u.metric?u.metric.label||u.metric:null,b=function(){return function(e){return e[y]}}(),g=null===u.metric?function(){return[l.r,l.g,l.b,255*l.a]}:(0,s.getBreakPointColorScaler)(u,d,b),m=function(){return function(e){var t=g(e);return r.length>0&&-1===r.indexOf(e[u.line_column])&&(t[3]/=2),t}}();return new i.PolygonLayer(Object.assign({id:"path-layer-"+u.slice_id,data:d,pickable:!0,filled:u.filled,stroked:u.stroked,getPolygon:function(){return function(e){return e.polygon}}(),getFillColor:m,getLineColor:[c.r,c.g,c.b,255*c.a],getLineWidth:u.line_width,extruded:u.extruded,getElevation:function(){return function(e){return function(e,t){return 0===t(e)[3]?0:e.elevation}(e,m)}}(),elevationScale:u.multiplier,fp64:!0},(0,f.commonLayerProps)(u,n,o)))}var b={formData:a.default.object.isRequired,payload:a.default.object.isRequired,setControlValue:a.default.func.isRequired,viewport:a.default.object.isRequired,onAddFilter:a.default.func,setTooltip:a.default.func},g={onAddFilter:function(){return function(){}}(),setTooltip:function(){return function(){}}()},m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=t.getDerivedStateFromProps(e),n.getLayers=n.getLayers.bind(n),n.onSelect=n.onSelect.bind(n),n.onValuesChange=n.onValuesChange.bind(n),n.onViewportChange=n.onViewportChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["default"].Component),r(t,[{key:"onSelect",value:function(){return function(e){var t=this.props,n=t.formData,r=t.onAddFilter,o=new Date,a=o-this.state.lastClick<=v,i=[].concat(h(this.state.selected));if(a)i.splice(0,i.length,e);else if(n.toggle_polygons){var u=i.indexOf(e);-1===u?i.push(e):i.splice(u,1)}else i.splice(0,1,e);this.setState({selected:i,lastClick:o}),n.table_filter&&r(n.line_column,i,!1,!0)}}()},{key:"onValuesChange",value:function(){return function(e){this.setState({values:Array.isArray(e)?e:[e,e+this.state.getStep(e)]})}}()},{key:"onViewportChange",value:function(){return function(e){this.setState({viewport:e})}}()},{key:"getLayers",value:function(){return function(e){if(void 0===this.props.payload.data.features)return[];var t=[];return e[0]===e[1]||e[1]===this.end?t.push(function(t){return t.__timestamp>=e[0]&&t.__timestamp<=e[1]}):t.push(function(t){return t.__timestamp>=e[0]&&t.__timestamp<e[1]}),[y(this.props.formData,this.props.payload,this.props.setTooltip,this.state.selected,this.onSelect,t)]}}()},{key:"render",value:function(){return function(){var e=this.props,t=e.payload,n=e.formData,r=e.setControlValue,a=this.state,i=a.start,f=a.end,c=a.getStep,p=a.values,d=a.disabled,h=a.viewport,v=n,y=v.metric?v.metric.label||v.metric:null,b=function(e){return e[y]},g=(0,s.getBuckets)(n,t.data.features,b);return o.default.createElement("div",{style:{position:"relative"}},o.default.createElement(u.default,{getLayers:this.getLayers,start:i,end:f,getStep:c,values:p,onValuesChange:this.onValuesChange,disabled:d,viewport:h,onViewportChange:this.onViewportChange,mapboxApiAccessToken:t.data.mapboxApiKey,mapStyle:n.mapbox_style,setControlValue:r,aggregation:!0},null!==n.metric&&o.default.createElement(l.default,{categories:g,position:n.legend_position})))}}()}],[{key:"getDerivedStateFromProps",value:function(){return function(e,t){if(t&&e.payload.form_data===t.formData)return null;var n=e.payload.data.features||[],r=n.map(function(e){return e.__timestamp}),o=e.payload.form_data.time_grain_sqla||e.payload.form_data.granularity||"P1D",a=(0,c.getPlaySliderParams)(r,o);return{start:a.start,end:a.end,getStep:a.getStep,values:a.values,disabled:a.disabled,viewport:e.formData.autozoom?(0,f.fitViewport)(e.viewport,function(e){return e.map(function(e){return e.polygon}).flat()}(n)):e.viewport,selected:[],lastClick:0,formData:e.payload.form_data}}}()}]),t}();m.propTypes=b,m.defaultProps=g,t.default=m},1652:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.default.createElement("span",{className:"BootstrapSliderWrapper"},r.default.createElement(o.default,e))};var r=a(n(1)),o=a(n(1654));function a(e){return e&&e.__esModule?e:{default:e}}n(1655),n(1653)},1653:function(e,t,n){},2525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBounds=l,t.fitViewport=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{var r=l(t);return Object.assign({},e,(0,o.fitBounds)({height:e.height,width:e.width,padding:n,bounds:r}))}catch(t){return console.error("Could not auto zoom",t),e}},t.commonLayerProps=function(e,t,n){var o=e,a=void 0,u=void 0;if(o.js_tooltip)u=(0,i.default)(o.js_tooltip);else if(o.line_column&&o.metric&&["geohash","zipcode"].indexOf(o.line_type)>=0){var l=o.metric.label||o.metric;u=function(){return function(e){return r.default.createElement("div",null,r.default.createElement("div",null,o.line_column,": ",r.default.createElement("strong",null,e.object[o.line_column])),o.metric&&r.default.createElement("div",null,l,": ",r.default.createElement("strong",null,e.object[l])))}}()}u&&(a=function(){return function(e){e.picked?t({content:u(e),x:e.x,y:e.y}):t(null)}}());var s=void 0;o.js_onclick_href?s=function(){return function(e){var t=(0,i.default)(o.js_onclick_href)(e);window.open(t)}}():o.table_filter&&void 0!==n&&(s=function(){return function(e){return n(e.object[o.line_column])}}());return{onClick:s,onHover:a,pickable:Boolean(a)}},t.getAggFunc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sum",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("count"===e)return function(e){return e.length};var n=void 0;n=e in s?function(){return function(n,r){var o=void 0;o=t?n.sort(function(e,n){return a.ascending(t(e),t(n))}):n.sort(a.ascending);return a.quantile(o,s[e],r)}}():a[e];if(!t)return function(e){return n(e)};return function(e){return n(e.map(t))}};var r=u(n(1)),o=n(2535),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(17)),i=u(n(2526));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=a.extent(e,function(e){return e[1]}),n=a.extent(e,function(e){return e[0]});return[[n[0],t[0]],[n[1],t[1]]]}var s={p1:.01,p5:.05,p95:.95,p99:.99}},2526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o={},a="SAFE_EVAL_"+Math.floor(1e6*Math.random());o[a]={};var i=a+"="+e,u=Object.assign({},s,t);Object.keys(u).forEach(function(e){o[e]=u[e]});try{return r.default.runInNewContext(i,o,n),o[a]}catch(e){return function(){return e}}};var r=l(n(2553)),o=l(n(2554)),a=u(n(17)),i=u(n(2528));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}var s={console:console,_:o.default,colors:i,d3array:a}},2528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToRGB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;if(!e)return[0,0,0,t];var n=(0,r.rgb)(e),o=n.r,a=n.g,i=n.b;return[o,a,i,t]};var r=n(42)},2531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(477)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=f(n(1)),u=f(n(0)),l=f(n(2547)),s=f(n(2532));function f(e){return e&&e.__esModule?e:{default:e}}n(2555);var c=2e3,p={viewport:u.default.object.isRequired,layers:u.default.array.isRequired,setControlValue:u.default.func,mapStyle:u.default.string,mapboxApiAccessToken:u.default.string.isRequired,onViewportChange:u.default.func},d={mapStyle:"light",onViewportChange:function(){return function(){}}(),setControlValue:function(){return function(){}}()},h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tick=n.tick.bind(n),n.onViewportChange=n.onViewportChange.bind(n),n.state={previousViewport:e.viewport,timer:setInterval(n.tick,c)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["default"].Component),a(t,[{key:"componentWillUnmount",value:function(){return function(){clearInterval(this.state.timer)}}()},{key:"onViewportChange",value:function(){return function(e){var t=Object.assign({},e),n=Object.assign({},this.state.previousViewport,t);this.props.onViewportChange(n)}}()},{key:"tick",value:function(){return function(){var e=this;if(this.state&&!(0,r.default)(this.state.previousViewport,this.props.viewport)){var t=this.props.setControlValue,n=this.props.viewport;t&&t("viewport",n),this.setState(function(){return{previousViewport:e.props.viewport}})}}}()},{key:"layers",value:function(){return function(){return this.props.layers.some(function(e){return"function"==typeof e})?this.props.layers.map(function(e){return"function"==typeof e?e():e}):this.props.layers}}()},{key:"render",value:function(){return function(){var e=this.props.viewport;return i.default.createElement(l.default,o({},e,{mapStyle:this.props.mapStyle,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiAccessToken}),i.default.createElement(s.default,o({},e,{layers:this.layers(),initWebGLParameters:!0})))}}()}],[{key:"getDerivedStateFromProps",value:function(){return function(e,t){return e.viewport!==t.viewport?{viewport:Object.assign({},e.viewport),previousViewport:t.viewport}:null}}()}]),t}();t.default=h,h.propTypes=p,h.defaultProps=d},2536:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(1)),i=s(n(0)),u=s(n(2531)),l=s(n(2540));function s(e){return e&&e.__esModule?e:{default:e}}var f=20,c={getLayers:i.default.func.isRequired,start:i.default.number.isRequired,end:i.default.number.isRequired,getStep:i.default.func,values:i.default.array.isRequired,aggregation:i.default.bool,disabled:i.default.bool,viewport:i.default.object.isRequired,children:i.default.node,onViewportChange:i.default.func,onValuesChange:i.default.func},p={aggregation:!1,disabled:!1,onViewportChange:function(){return function(){}}(),onValuesChange:function(){return function(){}}()},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=(e.getLayers,e.start,e.end,e.getStep,e.values,e.disabled,e.viewport,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["getLayers","start","end","getStep","values","disabled","viewport"]));return n.other=r,n.onViewportChange=n.onViewportChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"].Component),o(t,[{key:"onViewportChange",value:function(){return function(e){var t=this.props.disabled?Object.assign({},e):Object.assign({},e,{height:e.height+f});this.props.onViewportChange(t)}}()},{key:"render",value:function(){return function(){var e=this.props,t=e.start,n=e.end,o=e.getStep,i=e.disabled,s=e.aggregation,c=e.children,p=e.getLayers,d=e.values,h=e.onValuesChange,v=e.viewport,y=p(d),b=Object.assign({},v,{height:i?v.height:v.height-f});return a.default.createElement("div",null,a.default.createElement(u.default,r({},this.other,{viewport:b,layers:y,onViewportChange:this.onViewportChange})),!i&&a.default.createElement(l.default,{start:t,end:n,step:o(t),values:d,range:!s,onChange:h}),c)}}()}]),t}();t.default=d,d.propTypes=c,d.defaultProps=p},2537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPlaySliderParams=void 0,t.truncate=l;var r,o=n(8),a=(r=o)&&r.__esModule?r:{default:r};function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var u=[1,0,1,0,0,0,0];function l(e,t){var n=(0,a.default)(e).subtract(t),r=e.toArray(),o=n.toArray(),i=r.map(function(e,t){return o[t]!==e}).indexOf(!0),l=r.map(function(e,t){if(t===i){var n=e-o[t];return e-(e-u[t])%n}return t<i||-1===i?e:u[t]});return(0,a.default)(l)}t.getPlaySliderParams=function(){return function(e,t){var n=(0,a.default)(Math.min.apply(Math,i(e))),r=(0,a.default)(Math.max.apply(Math,i(e))),o=void 0,u=void 0;if(-1!==t.indexOf("/")){var s=t.split("/",2);s[0].endsWith("Z")?(u=(0,a.default)(s[0]),o=a.default.duration(s[1])):(u=(0,a.default)(s[1]),o=a.default.duration(s[0]))}else u=l(n,o=a.default.duration(t));for(var f=(0,a.default)(u);f<n;)f.add(o);for(;f>n;)f.subtract(o);for(var c=(0,a.default)(u);c>r;)c.subtract(o);for(;c<r;)c.add(o);var p=null!=t?[f,(0,a.default)(f).add(o)]:[f,c],d=e.every(function(e){return null===e});return{start:parseInt(f.format("x"),10),end:parseInt(c.format("x"),10),getStep:function(e,t){var n=parseInt((0,a.default)(t).format("x"),10);return parseInt((0,a.default)(t).add(e).format("x"),10)-n}.bind(this,o),values:p.map(function(e){return parseInt(e.format("x"),10)}),disabled:d}}}()},2540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(1)),a=s(n(0)),i=s(n(1656)),u=n(10),l=s(n(1652));function s(e){return e&&e.__esModule?e:{default:e}}n(2541);var f={start:a.default.number.isRequired,step:a.default.number.isRequired,end:a.default.number.isRequired,values:a.default.array.isRequired,onChange:a.default.func,loopDuration:a.default.number,maxFrames:a.default.number,orientation:a.default.oneOf(["horizontal","vertical"]),reversed:a.default.bool,disabled:a.default.bool,range:a.default.bool},c={onChange:function(){return function(){}}(),loopDuration:15e3,maxFrames:100,orientation:"horizontal",reversed:!1,disabled:!1,range:!0},p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={intervalId:null};var r=e.end-e.start,o=Math.min(e.maxFrames,r/e.step),a=r/o;return n.intervalMilliseconds=e.loopDuration/o,n.increment=a<e.step?e.step:a-a%e.step,n.onChange=n.onChange.bind(n),n.play=n.play.bind(n),n.pause=n.pause.bind(n),n.stepBackward=n.stepBackward.bind(n),n.stepForward=n.stepForward.bind(n),n.getPlayClass=n.getPlayClass.bind(n),n.formatter=n.formatter.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["default"].PureComponent),r(t,[{key:"componentDidMount",value:function(){return function(){i.default.bind(["space"],this.play)}}()},{key:"componentWillUnmount",value:function(){return function(){i.default.unbind(["space"])}}()},{key:"onChange",value:function(){return function(e){this.props.onChange(e.target.value),null!=this.state.intervalId&&this.pause()}}()},{key:"getPlayClass",value:function(){return function(){return null==this.state.intervalId?"fa fa-play fa-lg slider-button":"fa fa-pause fa-lg slider-button"}}()},{key:"play",value:function(){return function(){if(!this.props.disabled)if(null!=this.state.intervalId)this.pause();else{var e=setInterval(this.stepForward,this.intervalMilliseconds);this.setState({intervalId:e})}}}()},{key:"pause",value:function(){return function(){clearInterval(this.state.intervalId),this.setState({intervalId:null})}}()},{key:"stepForward",value:function(){return function(){var e=this,t=this.props,n=t.start,r=t.end,o=t.step,a=t.values;if(!t.disabled){var i=(Array.isArray(a)?a:[a,a+o]).map(function(t){return t+e.increment}),u=i[1]>r?i[0]-n:0;this.props.onChange(i.map(function(e){return e-u}))}}}()},{key:"stepBackward",value:function(){return function(){var e=this,t=this.props,n=t.start,r=t.end,o=t.step,a=t.values;if(!t.disabled){var i=(Array.isArray(a)?a:[a,a+o]).map(function(t){return t-e.increment}),u=i[0]<n?r-i[1]:0;this.props.onChange(i.map(function(e){return e+u}))}}}()},{key:"formatter",value:function(){return function(e){if(this.props.disabled)return(0,u.t)("Data has no time steps");var t=e;return Array.isArray(e)?e[0]===e[1]&&(t=[e[0]]):t=[e],t.map(function(e){return new Date(e).toUTCString()}).join(" : ")}}()},{key:"render",value:function(){return function(){var e=this.props,t=e.start,n=e.end,r=e.step,a=e.orientation,i=e.reversed,u=e.disabled,s=e.range,f=e.values;return o.default.createElement("div",{className:"play-slider"},o.default.createElement("div",{className:"play-slider-controls padded"},o.default.createElement("i",{className:"fa fa-step-backward fa-lg slider-button ",onClick:this.stepBackward}),o.default.createElement("i",{className:this.getPlayClass(),onClick:this.play}),o.default.createElement("i",{className:"fa fa-step-forward fa-lg slider-button ",onClick:this.stepForward})),o.default.createElement("div",{className:"play-slider-scrobbler padded"},o.default.createElement(l.default,{value:s?f:f[0],range:s,formatter:this.formatter,change:this.onChange,min:t,max:n,step:r,orientation:a,reversed:i,disabled:u?"disabled":"enabled"})))}}()}]),t}();t.default=p,p.propTypes=f,p.defaultProps=c},2541:function(e,t,n){},2542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(1)),i=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(2543);var s={categories:i.default.object,toggleCategory:i.default.func,showSingleCategory:i.default.func,position:i.default.oneOf([null,"tl","tr","bl","br"])},f={categories:{},toggleCategory:function(){return function(){}}(),showSingleCategory:function(){return function(){}}(),position:"tr"},c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["default"].PureComponent),o(t,[{key:"render",value:function(){return function(){var e,t=this;if(0===Object.keys(this.props.categories).length||null===this.props.position)return null;var n=Object.entries(this.props.categories).map(function(e){var n=r(e,2),o=n[0],i=n[1],u={color:"rgba("+i.color.join(", ")+")"},l=i.enabled?"●":"○";return a.default.createElement("li",{key:o},a.default.createElement("a",{href:"#",onClick:function(){return t.props.toggleCategory(o)},onDoubleClick:function(){return t.props.showSingleCategory(o)}},a.default.createElement("span",{style:u},l)," ",o))}),o="t"===this.props.position.charAt(0)?"top":"bottom",i="r"===this.props.position.charAt(1)?"right":"left",u=(l(e={position:"absolute"},o,"0px"),l(e,i,"10px"),e);return a.default.createElement("div",{className:"legend",style:u},a.default.createElement("ul",{className:"categories"},n))}}()}]),t}();t.default=c,c.propTypes=s,c.defaultProps=f},2543:function(e,t,n){},2548:function(e,t){},2549:function(e,t){},2550:function(e,t){},2629:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getBreakPoints=s,t.getBreakPointColorScaler=f,t.getBuckets=function(e,t,n){var r=s(e,t,n),o=f(e,t,n),a={};return r.slice(1).forEach(function(t,n){var i=r[n]+" - "+r[n+1],u=.5*(parseInt(r[n],10)+parseInt(r[n+1],10));a[i]={color:o(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e.metric.label||e.metric,u)),enabled:!0}}),a};var o=n(17),a=n(62),i=n(229),u=n(2528);var l=10;function s(e,t,n){var a=e.break_points,i=e.num_buckets;if(!t)return[];if(void 0===a||0===a.length){var u=i?parseInt(i,10):l,s=(0,o.extent)(t,n),f=r(s,2),c=f[0],p=(f[1]-c)/u,d=0===p?0:Math.max(0,Math.ceil(Math.log10(1/p)));return Array(u+1).fill().map(function(e,t){return(c+t*p).toFixed(d)})}return a.sort(function(e,t){return parseFloat(e)-parseFloat(t)})}function f(e,t,n){var r=e.break_points,l=e.num_buckets,f=e.linear_color_scheme,c=e.opacity,p=r||l?s({break_points:r,num_buckets:l},t,n):null,d=Array.isArray(f)?new i.SequentialScheme({id:"custom",colors:f}):(0,i.getSequentialSchemeRegistry)().get(f),h=void 0,v=void 0;if(null!==p){var y=p.length-1,b=y>1?d.getColors(y):[d.colors[d.colors.length-1]],g=b[0],m=b[b.length-1];b.unshift(g),b.push(m);var _=p.map(function(e){return parseFloat(e)});h=(0,a.scaleThreshold)().domain(_).range(b),v=function(){return function(e){return e>p[y]||e<p[0]}}()}else h=d.createLinearScale((0,o.extent)(t,n)),v=function(){return function(){return!1}}();return function(e){var t=n(e),r=(0,u.hexToRGB)(h(t));return v(t)?r[3]=0:r[3]=c/100*255,r}}}}]);