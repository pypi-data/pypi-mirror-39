(window.webpackJsonp=window.webpackJsonp||[]).push([[36,3],{104:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(2527)),r=o(a(2602));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,n.default)(r.default)},1592:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=f(a(668)),i=f(a(1)),l=f(a(0)),u=a(459),s=f(a(104)),c=f(a(92));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var p={width:l.default.number,height:l.default.number,annotationData:l.default.object,datasource:l.default.array,formData:l.default.object,onAddFilter:l.default.func,onError:l.default.func},y={onAddFilter:function(){return function(){}}(),onError:function(){return function(){}}()};var m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={payload:[]},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["default"].Component),r(t,[{key:"componentDidMount",value:function(){return function(){this.loadData(this.props)}}()},{key:"componentWillReceiveProps",value:function(){return function(e){this.loadData(e)}}()},{key:"loadData",value:function(){return function(e){var t=this,a=e.formData,r=e.payload,i=r.data.slices,l=a.extraFilters,s=a.filters,c=a.lineCharts,f=a.lineCharts2,p=a.prefixMetricWithSliceName,y=a.timeRange;this.setState({payload:[]});var m=[].concat(d(i.axis1.map(function(e){return[1,e]})),d(i.axis2.map(function(e){return[2,e]}))).map(function(e){var t,a=n(e,2),r=a[0],i=a[1],c=i.form_data,f=Object.assign({},i.form_data,{filters:(c.filters||[]).concat(s||[]).concat(l||[]),time_range:y}),d=p;return(t=(0,u.getExploreLongUrl)(f,"json"),new Promise(function(e,a){o.default.json(t,function(t,n){t?a(t):e(n.data)})})).then(function(e){return e.map(function(e){var t=e.key,a=e.values;return{key:d?i.slice_name+": "+t:t,type:f.viz_type,values:a,yAxis:r}})})});Promise.all(m).then(function(e){var a,n=Object.assign({},r);if(n.data=(a=[]).concat.apply(a,d(e)),c.length&&f.length){var o=1/0,i=-1/0;n.data.forEach(function(e){o=Math.min.apply(Math,[o].concat(d(e.values.map(function(e){return e.x})))),i=Math.max.apply(Math,[i].concat(d(e.values.map(function(e){return e.x}))))}),n.data.forEach(function(e){e.values.push({x:o,y:null}),e.values.push({x:i,y:null})})}t.setState({payload:n})})}}()},{key:"render",value:function(){return function(){var e=this.props,t=e.width,a=e.height,n=e.annotationData,r=e.datasource,o=e.formData,l=e.onAddFilter,u=e.onError,f=this.state.payload;return i.default.createElement(s.default,(0,c.default)({width:t,height:a,annotationData:n,datasource:r,formData:o,onError:u,onAddFilter:l,payload:f}))}}()}]),t}();m.propTypes=p,m.defaultProps=y,t.default=m},2527:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();t.default=function(e){var t=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.setContainerRef=t.setContainerRef.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"componentDidMount",value:function(){return function(){this.execute()}}()},{key:"componentDidUpdate",value:function(){return function(){this.execute()}}()},{key:"componentWillUnmount",value:function(){return function(){this.container=null}}()},{key:"setContainerRef",value:function(){return function(e){this.container=e}}()},{key:"execute",value:function(){return function(){this.container&&e(this.container,this.props)}}()},{key:"render",value:function(){return function(){var e=this.props,t=e.id,a=e.className;return i.default.createElement("div",{id:t,className:a,ref:this.setContainerRef})}}()}]),a}(i.default.Component);e.displayName&&(t.displayName=e.displayName);e.propTypes&&(t.propTypes=e.propTypes);e.defaultProps&&(t.defaultProps=e.defaultProps);return t};var r,o=a(1),i=(r=o)&&r.__esModule?r:{default:r}},2602:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=x(a(908)),r=x(a(668)),o=x(a(2603)),i=x(a(1658)),l=x(a(8)),u=x(a(0)),s=a(10),c=a(229);a(2604);var f=a(230),d=x(f),p=a(197),y=a(669),m=a(481),h=a(912),b=a(2605);function x(e){return e&&e.__esModule?e:{default:e}}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}a(2606);var w=c.CategoricalColorNamespace.getColor,A=c.CategoricalColorNamespace.getScale,k=30,_=1e3,O=480,T={small:340},M=["line","dual_line","line_multi","area","compare","bar","time_pivot"],C={data:u.default.oneOfType([u.default.arrayOf(u.default.oneOfType([b.categoryAndValueXYType,u.default.shape({key:u.default.string,values:u.default.arrayOf(b.categoryAndValueXYType)}),u.default.shape({key:u.default.arrayOf(u.default.string),values:u.default.arrayOf(b.numericXYType)}),u.default.shape({classed:u.default.string,key:u.default.string,type:u.default.string,values:u.default.arrayOf(b.numericXYType),yAxis:u.default.number}),u.default.shape({label:u.default.string,values:u.default.arrayOf(b.boxPlotValueType)}),u.default.shape({key:u.default.string,values:u.default.arrayOf(u.default.object)})])),b.bulletDataType]),width:u.default.number,height:u.default.number,annotationData:u.default.object,annotationLayers:u.default.arrayOf(b.annotationLayerType),bottomMargin:b.numberOrAutoType,colorScheme:u.default.string,comparisonType:u.default.string,contribution:u.default.bool,leftMargin:b.numberOrAutoType,onError:u.default.func,showLegend:u.default.bool,showMarkers:u.default.bool,useRichTooltip:u.default.bool,vizType:u.default.oneOf(["area","bar","box_plot","bubble","bullet","compare","column","dist_bar","line","line_multi","time_pivot","pie","dual_line"]),xAxisFormat:u.default.string,xAxisLabel:u.default.string,xAxisShowMinMax:u.default.bool,xIsLogScale:u.default.bool,xTicksLayout:u.default.oneOf(["auto","staggered","45째"]),yAxisFormat:u.default.string,yAxisBounds:u.default.arrayOf(u.default.number),yAxisLabel:u.default.string,yAxisShowMinMax:u.default.bool,yIsLogScale:u.default.bool,orderBars:u.default.bool,isBarStacked:u.default.bool,showBarValue:u.default.bool,reduceXTicks:u.default.bool,showControls:u.default.bool,showBrush:u.default.oneOf([!0,!1,"auto"]),onBrushEnd:u.default.func,yAxis2Format:u.default.string,lineInterpolation:u.default.string,isDonut:u.default.bool,isPieLabelOutside:u.default.bool,pieLabelType:u.default.oneOf(["key","value","percent","key_value","key_percent"]),showLabels:u.default.bool,areaStackedStyle:u.default.string,entity:u.default.string,maxBubbleSize:u.default.number,xField:b.stringOrObjectWithLabelType,yField:b.stringOrObjectWithLabelType,sizeField:b.stringOrObjectWithLabelType,baseColor:b.rgbObjectType},L=function(){return function(){}}(),S=r.default.format(".3s");function j(e,t){var a=t.data,u=t.width,c=t.height,b=t.annotationData,x=t.annotationLayers,C=void 0===x?[]:x,j=t.areaStackedStyle,D=t.baseColor,F=t.bottomMargin,E=t.colorScheme,N=t.comparisonType,P=t.contribution,B=t.entity,R=t.isBarStacked,I=t.isDonut,V=t.isPieLabelOutside,z=t.leftMargin,W=t.lineInterpolation,X=void 0===W?"linear":W,Y=t.maxBubbleSize,U=t.onBrushEnd,q=void 0===U?L:U,G=t.onError,J=void 0===G?L:G,Q=t.orderBars,H=t.pieLabelType,K=t.reduceXTicks,Z=void 0!==K&&K,$=t.showBarValue,ee=t.showBrush,te=t.showControls,ae=t.showLabels,ne=t.showLegend,re=t.showMarkers,oe=t.sizeField,ie=t.useRichTooltip,le=t.vizType,ue=t.xAxisFormat,se=t.xAxisLabel,ce=t.xAxisShowMinMax,fe=void 0!==ce&&ce,de=t.xField,pe=t.xIsLogScale,ye=t.xTicksLayout,me=t.yAxisFormat,he=t.yAxis2Format,be=t.yAxisBounds,xe=t.yAxisLabel,ve=t.yAxisShowMinMax,ge=void 0!==ve&&ve,we=t.yField,Ae=t.yIsLogScale,ke=null!==document.querySelector("#explorer-container"),_e=e;_e.innerHTML="";var Oe=C.filter(function(e){return e.show}),Te=void 0,Me=u,Ce="key";function Le(e){return e.indexOf(le)>=0}var Se=function(){return function(){var t=r.default.select(e),x=t.select("svg");x.empty()&&(x=t.append("svg"));var C="bullet"===le?Math.min(c,50):c,W=Le(M),U="staggered"===ye,G="auto"===ye&&Le(["column","dist_bar"])||"45째"===ye?45:0;if(45===G&&(0,m.isTruthy)(ee))return J((0,s.t)("You cannot use 45째 tick layout along with the time range filter")),null;var K=(0,m.isTruthy)(ee)||"auto"===ee&&c>=O&&"45째"!==ye;switch(le){case"line":K?(Te=o.default.models.lineWithFocusChart(),U&&(Te.focus.margin({bottom:40}),Te.focusHeight(80)),Te.focus.xScale(r.default.time.scale.utc())):Te=o.default.models.lineChart(),Te.xScale(r.default.time.scale.utc()),Te.interpolate(X);break;case"time_pivot":(Te=o.default.models.lineChart()).xScale(r.default.time.scale.utc()),Te.interpolate(X);break;case"dual_line":case"line_multi":(Te=o.default.models.multiChart()).interpolate(X);break;case"bar":Te=o.default.models.multiBarChart().showControls(te).groupSpacing(.1),Z||(Me=(0,h.computeBarChartWidth)(a,R,u)),Te.width(Me),Te.xAxis.showMaxMin(!1),Te.stacked(R);break;case"dist_bar":(Te=o.default.models.multiBarChart().showControls(te).reduceXTicks(Z).groupSpacing(.1)).xAxis.showMaxMin(!1),Te.stacked(R),Q&&a.forEach(function(e){e.values.sort(function(e,t){return(0,h.tryNumify)(e.x)<(0,h.tryNumify)(t.x)?-1:1})}),Z||(Me=(0,h.computeBarChartWidth)(a,R,u)),Te.width(Me);break;case"pie":if(Te=o.default.models.pieChart(),Ce="x",Te.valueFormat(S),I&&Te.donut(!0),Te.showLabels(ae),Te.labelsOutside(V),Te.labelThreshold(.05),Te.cornerRadius(!0),"key_percent"!==H&&"key_value"!==H?Te.labelType(H):"key_value"===H&&Te.labelType(function(e){return e.data.x+": "+r.default.format(".3s")(e.data.y)}),"percent"===H||"key_percent"===H){var ce=r.default.sum(a,function(e){return e.y});Te.tooltip.valueFormatter(function(e){return(e/ce*100).toFixed()+"%"}),"key_percent"===H&&Te.labelType(function(e){return e.data.x+": "+(e.data.y/ce*100).toFixed()+"%"})}break;case"column":Te=o.default.models.multiBarChart().reduceXTicks(!1);break;case"compare":(Te=o.default.models.cumulativeLineChart()).xScale(r.default.time.scale.utc()),Te.useInteractiveGuideline(!0),Te.xAxis.showMaxMin(!1);break;case"bubble":(Te=o.default.models.scatterChart()).showDistX(!0),Te.showDistY(!0),Te.tooltip.contentGenerator(function(e){return(0,h.generateBubbleTooltipContent)({point:e.point,entity:B,xField:de,yField:we,sizeField:oe,xFormatter:(0,y.d3FormatPreset)(ue),yFormatter:(0,y.d3FormatPreset)(me),sizeFormatter:S})}),Te.pointRange([5,Math.pow(Y,2)]),Te.pointDomain([0,r.default.max(a,function(e){return r.default.max(e.values,function(e){return e.size})})]);break;case"area":(Te=o.default.models.stackedAreaChart()).showControls(te),Te.style(j),Te.xScale(r.default.time.scale.utc());break;case"box_plot":Ce="label",(Te=o.default.models.boxPlotChart()).x(function(e){return e.label}),Te.maxBoxWidth(75);break;case"bullet":Te=o.default.models.bulletChart();break;default:throw new Error("Unrecognized visualization for nvd3"+le)}Te.margin({top:0,left:0,right:0,bottom:0}),$&&setTimeout(function(){(0,h.drawBarValues)(x,a,R,me)},_),K&&q!==L&&Te.focus.dispatch.on("brush",function(e){var t=(0,h.stringifyTimeRange)(e.extent);t&&e.brush.on("brushend",function(){q(t)})}),Te.xAxis&&Te.xAxis.staggerLabels&&Te.xAxis.staggerLabels(U),Te.xAxis&&Te.xAxis.rotateLabels&&Te.xAxis.rotateLabels(G),Te.x2Axis&&Te.x2Axis.staggerLabels&&Te.x2Axis.staggerLabels(U),Te.x2Axis&&Te.x2Axis.rotateLabels&&Te.x2Axis.rotateLabels(G),"showLegend"in Te&&void 0!==ne&&(Me<T.small&&"pie"!==le?Te.showLegend(!1):Te.showLegend(ne)),Te.forceY&&be&&(null!==be[0]||null!==be[1])&&Te.forceY(be),Ae&&Te.yScale(r.default.scale.log()),pe&&Te.xScale(r.default.scale.log());var ve=void 0;W?(ve=(0,y.d3TimeFormatPreset)(ue),Te.interactiveLayer.tooltip.headerFormatter(p.formatDateVerbose)):ve=(0,y.d3FormatPreset)(ue),Te.x2Axis&&Te.x2Axis.tickFormat&&Te.x2Axis.tickFormat(ve),!Le(["dist_bar","box_plot"])&&Te.xAxis&&Te.xAxis.tickFormat&&Te.xAxis.tickFormat(ve);var Se=(0,y.d3FormatPreset)(me);if(Te.yAxis&&Te.yAxis.tickFormat&&((P||"percentage"===N)&&(Se=r.default.format(".1%")),Te.yAxis.tickFormat(Se)),Te.y2Axis&&Te.y2Axis.tickFormat&&Te.y2Axis.tickFormat(Se),Te.yAxis&&Te.yAxis.ticks(5),Te.y2Axis&&Te.y2Axis.ticks(5),(0,h.setAxisShowMaxMin)(Te.xAxis,fe),(0,h.setAxisShowMaxMin)(Te.x2Axis,fe),(0,h.setAxisShowMaxMin)(Te.yAxis,ge),(0,h.setAxisShowMaxMin)(Te.y2Axis,ge),"time_pivot"===le){if(D){var je=D.r,De=D.g,Fe=D.b;Te.color(function(e){var t=e.rank>0?.5*e.perc:1;return"rgba("+je+", "+De+", "+Fe+", "+t+")"})}}else if("bullet"!==le){var Ee=A(E);Te.color(function(e){return e.color||Ee((0,h.cleanColorInput)(e[Ce]))})}if(Le(["line","area"])&&ie&&(Te.useInteractiveGuideline(!0),"line"===le&&Te.interactiveLayer.tooltip.contentGenerator(function(e){return(0,h.generateRichLineTooltipContent)(e,Se)})),Le(["dual_line","line_multi"])){var Ne=r.default.format(me),Pe=r.default.format(he);Te.yAxis1.tickFormat(Ne),Te.yAxis2.tickFormat(Pe);var Be=a.map(function(e){return 1===e.yAxis?Ne:Pe});Te.useInteractiveGuideline(!0),Te.interactiveLayer.tooltip.contentGenerator(function(e){return(0,h.generateMultiLineTooltipContent)(e,ve,Be)}),"dual_line"===le?Te.showLegend(Me>T.small):Te.showLegend(ne)}if(Te.width(Me),Te.height(C),_e.style.height=C+"px",x.datum(a).transition().duration(500).attr("height",C).attr("width",Me).call(Te),Le(["dual_line","line_multi"])){var Re=Te.yAxis1.ticks(),Ie=Te.yAxis1.scale().domain(Te.yAxis1.domain()).nice(Re).ticks(Re),Ve=Te.yAxis2.scale().domain(Te.yAxis2.domain()).nice(Re).ticks(Re),ze=Ie.length-Ve.length;if(Ie.length&&Ve.length&&0!==ze){for(var We=ze<0?Ie:Ve,Xe=We[1]-We[0],Ye=0;Ye<Math.abs(ze);Ye++)Ye%2==0?We.unshift(We[0]-Xe):We.push(We[We.length-1]+Xe);Te.yDomain1([Ie[0],Ie[Ie.length-1]]),Te.yDomain2([Ve[0],Ve[Ve.length-1]]),Te.yAxis1.tickValues(Ie),Te.yAxis2.tickValues(Ve)}}if(re&&x.selectAll(".nv-point").style("stroke-opacity",1).style("fill-opacity",1),void 0!==Te.yAxis||void 0!==Te.yAxis2){var Ue=Math.ceil(Math.min(u*(ke?.01:.03),k)),qe=Te.margin();Te.xAxis&&(qe.bottom=28);var Ge=(0,h.getMaxLabelSize)(x,Te.yAxis2?"nv-y1":"nv-y"),Je=(0,h.getMaxLabelSize)(x,"nv-x");if(qe.left=Ge+Ue,xe&&""!==xe&&(qe.left+=25),$&&(qe.top+=24),fe&&(qe.right=Math.max(20,Je/2)+Ue),45===G?(qe.bottom=Je+Ue,qe.right=Je+Ue):U&&(qe.bottom=40),Le(["dual_line","line_multi"])){var Qe=(0,h.getMaxLabelSize)(x,"nv-y2");qe.right=Qe+Ue}if(F&&"auto"!==F&&(qe.bottom=parseInt(F,10)),z&&"auto"!==z&&(qe.left=z),se&&""!==se&&Te.xAxis){qe.bottom+=25;var He=0;qe.bottom&&!Number.isNaN(qe.bottom)&&(He=qe.bottom-45),Te.xAxis.axisLabel(se).axisLabelDistance(He)}if(xe&&""!==xe&&Te.yAxis){var Ke=0;qe.left&&!Number.isNaN(qe.left)&&(Ke=qe.left-70),Te.yAxis.axisLabel(xe).axisLabelDistance(Ke)}if(W&&b&&Oe.length>0){var Ze=Oe.filter(function(e){return e.annotationType===d.default.TIME_SERIES}).reduce(function(e,t){return e.concat((b[t.name]||[]).map(function(e){if(!e)return{};var a=Array.isArray(e.key)?t.name+", "+e.key.join(", "):t.name+", "+e.key;return Object.assign({},e,{key:a,color:t.color,strokeWidth:t.width,classed:t.opacity+" "+t.style+" nv-timeseries-annotation-layer showMarkers"+t.showMarkers+" hideLine"+t.hideLine})}))},[]);a.push.apply(a,g(Ze))}if(x.datum(a).transition().duration(500).attr("width",Me).attr("height",C).call(Te),window.addEventListener("scroll",(0,n.default)(h.hideTooltips,250)),W&&Oe.length>0){var $e=Oe.filter(function(e){return e.annotationType===d.default.FORMULA}).map(function(e){return Object.assign({},e,{formula:i.default.parse(e.value)})}),et=void 0,tt=void 0,at=void 0;if("bar"===le?(tt=r.default.min(a[0].values,function(e){return e.x}),et=r.default.max(a[0].values,function(e){return e.x}),at=r.default.scale.quantile().domain([tt,et]).range(Te.xAxis.range())):(tt=Te.xAxis.scale().domain()[0].valueOf(),et=Te.xAxis.scale().domain()[1].valueOf(),at=Te.xScale?Te.xScale():Te.xAxis.scale?Te.xAxis.scale():r.default.scale.linear()),at&&at.clamp&&at.clamp(!0),$e.length>0){var nt=[];if("bar"===le){var rt=a.reduce(function(e,t){return t.values.forEach(function(t){return e.add(t.x)}),e},new Set);nt.push.apply(nt,g(rt.values())),nt.sort()}else{var ot=Math.min.apply(Math,g(a.map(function(e){return Math.min.apply(Math,g(e.values.slice(1).map(function(t,a){return t.x-e.values[a].x})))}))),it=(et-tt)/(ot||1);ot=it<100?(et-tt)/100:ot,ot=it>500?(et-tt)/500:ot,nt.push(tt);for(var lt=tt;lt<et;lt+=ot)nt.push(lt);nt.push(et)}var ut=$e.map(function(e){return{key:e.name,values:nt.map(function(t){return{y:e.formula.eval({x:t}),x:t}}),color:e.color,strokeWidth:e.width,classed:e.opacity+" "+e.style}});a.push.apply(a,g(ut))}var st=Te.xAxis1?Te.xAxis1:Te.xAxis,ct=Te.yAxis1?Te.yAxis1:Te.yAxis,ft=st.scale().range()[1],dt=ct.scale().range()[0];b&&(Oe.filter(function(e){return e.annotationType===d.default.EVENT&&b&&b[e.name]}).forEach(function(t,a){var n=(0,f.applyNativeColumns)(t),o=r.default.select(e).select(".nv-wrap").append("g").attr("class","nv-event-annotation-layer-"+a),i=n.color||w((0,h.cleanColorInput)(n.name),E),u=(0,h.tipFactory)(n),s=(b[n.name].records||[]).map(function(e){var t=new Date(l.default.utc(e[n.timeColumn]));return Object.assign({},e,v({},n.timeColumn,t))}).filter(function(e){return!Number.isNaN(e[n.timeColumn].getMilliseconds())});s.length&&o.selectAll("line").data(s).enter().append("line").attr({x1:function(e){return at(new Date(e[n.timeColumn]))},y1:0,x2:function(e){return at(new Date(e[n.timeColumn]))},y2:dt}).attr("class",n.opacity+" "+n.style).style("stroke",i).style("stroke-width",n.width).on("mouseover",u.show).on("mouseout",u.hide).call(u),Te.focus.dispatch.on("onBrush.event-annotation",function(){o.selectAll("line").data(s).attr({x1:function(e){return at(new Date(e[n.timeColumn]))},y1:0,x2:function(e){return at(new Date(e[n.timeColumn]))},y2:dt,opacity:function(e){var t=at(new Date(e[n.timeColumn]));return t>0&&t<ft?1:0}})})}),Oe.filter(function(e){return e.annotationType===d.default.INTERVAL&&b&&b[e.name]}).forEach(function(t,a){var n=(0,f.applyNativeColumns)(t),o=r.default.select(e).select(".nv-wrap").append("g").attr("class","nv-interval-annotation-layer-"+a),i=n.color||w((0,h.cleanColorInput)(n.name),E),u=(0,h.tipFactory)(n),s=(b[n.name].records||[]).map(function(e){var t,a=new Date(l.default.utc(e[n.timeColumn])),r=new Date(l.default.utc(e[n.intervalEndColumn]));return Object.assign({},e,(v(t={},n.timeColumn,a),v(t,n.intervalEndColumn,r),t))}).filter(function(e){return!Number.isNaN(e[n.timeColumn].getMilliseconds())&&!Number.isNaN(e[n.intervalEndColumn].getMilliseconds())});s.length&&o.selectAll("rect").data(s).enter().append("rect").attr({x:function(e){return Math.min(at(new Date(e[n.timeColumn])),at(new Date(e[n.intervalEndColumn])))},y:0,width:function(e){return Math.max(Math.abs(at(new Date(e[n.intervalEndColumn]))-at(new Date(e[n.timeColumn]))),1)},height:dt}).attr("class",n.opacity+" "+n.style).style("stroke-width",n.width).style("stroke",i).style("fill",i).style("fill-opacity",.2).on("mouseover",u.show).on("mouseout",u.hide).call(u),Te.focus.dispatch.on("onBrush.interval-annotation",function(){o.selectAll("rect").data(s).attr({x:function(e){return at(new Date(e[n.timeColumn]))},width:function(e){var t=at(new Date(e[n.timeColumn]));return at(new Date(e[n.intervalEndColumn]))-t}})})})),x.datum(a).attr("height",C).attr("width",Me).call(Te),r.default.selectAll(".slice_container .nv-timeseries-annotation-layer.showMarkerstrue .nv-point").style("stroke-opacity",1).style("fill-opacity",1),r.default.selectAll(".slice_container .nv-timeseries-annotation-layer.hideLinetrue").style("stroke-width",0)}}return(0,h.wrapTooltip)(Te,u),Te}}();(0,h.hideTooltips)(),o.default.addGraph(Se)}j.displayName="NVD3",j.propTypes=C,t.default=j},2604:function(e,t,a){},2605:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.annotationLayerType=t.bulletDataType=t.boxPlotValueType=t.categoryAndValueXYType=t.numericXYType=t.rgbObjectType=t.stringOrObjectWithLabelType=t.numberOrAutoType=void 0;var n,r=a(0),o=(n=r)&&n.__esModule?n:{default:n},i=a(230);t.numberOrAutoType=o.default.oneOfType([o.default.number,o.default.oneOf(["auto"])]),t.stringOrObjectWithLabelType=o.default.oneOfType([o.default.string,o.default.shape({label:o.default.string})]),t.rgbObjectType=o.default.shape({r:o.default.number.isRequired,g:o.default.number.isRequired,b:o.default.number.isRequired}),t.numericXYType=o.default.shape({x:o.default.number,y:o.default.number}),t.categoryAndValueXYType=o.default.shape({x:o.default.string,y:o.default.number}),t.boxPlotValueType=o.default.shape({Q1:o.default.number,Q2:o.default.number,Q3:o.default.number,outliers:o.default.arrayOf(o.default.number),whisker_high:o.default.number,whisker_low:o.default.number}),t.bulletDataType=o.default.shape({markerLabels:o.default.arrayOf(o.default.string),markerLineLabels:o.default.arrayOf(o.default.string),markerLines:o.default.arrayOf(o.default.number),markers:o.default.arrayOf(o.default.number),measures:o.default.arrayOf(o.default.number),rangeLabels:o.default.arrayOf(o.default.string),ranges:o.default.arrayOf(o.default.number)}),t.annotationLayerType=o.default.shape({annotationType:o.default.oneOf(Object.keys(i.ANNOTATION_TYPES)),color:o.default.string,name:o.default.string,hideLine:o.default.bool,opacity:o.default.string,show:o.default.bool,showMarkers:o.default.bool,sourceType:o.default.string,style:o.default.string,value:o.default.string,width:o.default.number})},2606:function(e,t,a){},459:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChartKey=function(e){var t=e.slice;return t?t.slice_id:0},t.getAnnotationJsonUrl=function(e,t,a){if(null==e)return null;var n=(0,o.default)(window.location.search),r=a?"annotation_json":"slice_json";return n.pathname("/superset/"+r+"/"+e).search({form_data:JSON.stringify(t,function(e,t){return null===t?void 0:t})}).toString()},t.getURIDirectory=i,t.getExploreLongUrl=function(e,t){if(!e.datasource)return null;var a=new o.default("/"),n=i(e,t),r=a.search(!0);r.form_data=JSON.stringify(e),"standalone"===t&&(r.standalone="true");return a.directory(n).search(r).toString()},t.getExploreUrlAndPayload=l,t.exportChart=function(e,t){var a=l({formData:e,endpointType:t}),n=a.url,r=a.payload,o=document.createElement("form");o.action=n,o.method="POST",o.target="_blank";var i=document.createElement("input");i.type="hidden",i.name="csrf_token",i.value=(document.getElementById("csrf_token")||{}).value,o.appendChild(i);var u=document.createElement("input");u.type="hidden",u.name="form_data",u.value=JSON.stringify(r),o.appendChild(u),document.body.appendChild(o),o.submit(),document.body.removeChild(o)};var n,r=a(887),o=(n=r)&&n.__esModule?n:{default:n};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base",a="/superset/explore/";return["json","csv","query","results","samples"].indexOf(t)>=0&&(a="/superset/explore_json/"),a}function l(e){var t=e.formData,a=e.endpointType,n=void 0===a?"base":a,r=e.force,l=void 0!==r&&r,u=e.curUrl,s=void 0===u?null:u,c=e.requestParams,f=void 0===c?{}:c;if(!t.datasource)return null;var d=new o.default([location.protocol,"//",location.host].join(""));s&&(d=(0,o.default)((0,o.default)(s).search()));var p=i(t,n),y=d.search(!0);t.slice_id&&(y.form_data=JSON.stringify({slice_id:t.slice_id})),l&&(y.force="true"),"csv"===n&&(y.csv="true"),"standalone"===n&&(y.standalone="true"),"query"===n&&(y.query="true"),"results"===n&&(y.results="true"),"samples"===n&&(y.samples="true");var m=Object.keys(f);m.length&&m.forEach(function(e){f.hasOwnProperty(e)&&(y[e]=f[e])}),d=d.search(y).directory(p);var h=Object.assign({},t);return{url:d.toString(),payload:h}}}}]);