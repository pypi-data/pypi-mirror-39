

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating and running simple simulation scenarios &mdash; mosaik 2.5.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="mosaik 2.5.1 documentation" href="../index.html"/>
        <link rel="up" title="Tutorials" href="index.html"/>
        <link rel="next" title="Adding a control mechanism to a scenario" href="examplectrl.html"/>
        <link rel="prev" title="Integrating a simulation model into the mosaik ecosystem" href="examplesim.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>
</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> mosaik
          

          
          </a>

          
            
            
              <div class="version">
                2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ecosystem/index.html">Modular Design</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="examplesim.html">Integrating a simulation model into the mosaik ecosystem</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating and running simple simulation scenarios</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-world">The World</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-scenario">The scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-simulation">The simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examplectrl.html">Adding a control mechanism to a scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="demo2.html">Integrating a control mechanism</a></li>
<li class="toctree-l2"><a class="reference internal" href="cyclicdf.html">Cyclic data-flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="odysseus.html">Connecting mosaik and Odysseus</a></li>
<li class="toctree-l2"><a class="reference internal" href="odysseus2.html">Using Odysseus to process, visualize and store simulation data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_api-java.html">Integrating a Model in Java</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mosaik-api/index.html">The mosaik API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scenario-definition.html">Scenario definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simmanager.html">The simulator manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler.html">Scheduling and simulation execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">Developer&#8217;s Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About mosaik</a></li>
<li class="toctree-l1"><a class="reference internal" href="../privacy.html">Privacy Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legals.html">Legals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datenschutz.html">Datenschutz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../impressum.html">Impressum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">mosaik</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
        <li><a href="index.html">Tutorials</a> &raquo;</li>
      
    <li>Creating and running simple simulation scenarios</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/tutorials/demo1.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-and-running-simple-simulation-scenarios">
<span id="demo1"></span><h1>Creating and running simple simulation scenarios<a class="headerlink" href="#creating-and-running-simple-simulation-scenarios" title="Permalink to this headline">¶</a></h1>
<p>We will now create a simple scenario with mosaik in which we use also use
a simple data collector to get some nice output from our simulation. That
means, we will instantiate a few ExampleModels and a data monitor. We will
then connect the model instances to that monitor and simulate that for some
time.</p>
<div class="section" id="configuration">
<span id="sim-config"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>You should define the most important configuration values for your simulation
as &#8220;constants&#8221; on top of your scenario file. This makes it easier to
see what&#8217;s going on and change the parameter values.</p>
<p>Two of the most important parameters that you need in almost every simulation
are the <em>simulator configuration</em> and the <em>duration</em> of your simulation:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Sim config. and other parameters</span>
<span class="n">SIM_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ExampleSim&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;python&#39;</span><span class="p">:</span> <span class="s1">&#39;simulator_mosaik:ExampleSim&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s1">&#39;Collector&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="s1">&#39;python collector.py </span><span class="si">%(addr)s</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="n">END</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">60</span>  <span class="c1"># 10 minutes</span>

</pre></div>
</div>
<p>The <em>sim config</em> specifies which simulators are available and how to start
them. In the example above, we list our <em>ExampleSim</em> as well as <em>Collector</em> (the
names are arbitrarily chosen). For each simulator listed, we also specify how
to start it.</p>
<p>Since our example simulator is, like mosaik, written in Python 3, mosaik can
just import it and execute it in-process. The line <code class="docutils literal"><span class="pre">'python':</span>
<span class="pre">'simulator_mosaik:ExampleSim'</span></code> tells mosaik to import the package
<code class="docutils literal"><span class="pre">simulator_mosaik</span></code> and instantiate the class <code class="docutils literal"><span class="pre">ExampleSim</span></code> from it.</p>
<p>The data collector will be started as external process which will communicate
with mosaik via sockets. The line <code class="docutils literal"><span class="pre">'cmd':</span> <span class="pre">'python</span> <span class="pre">collector.py</span> <span class="pre">%(addr)s'</span></code>
tells mosaik to start the simulator by executing the command <code class="docutils literal"><span class="pre">python</span>
<span class="pre">collector.py</span></code>. Beforehand, mosaik replaces the placeholder <code class="docutils literal"><span class="pre">%(addr)s</span></code> with
its actual socket address HOSTNAME:PORT so that the simulator knows where to
connect to.</p>
<p>The section about the <a class="reference internal" href="../simmanager.html"><span class="doc">Sim Manager</span></a> explains all this in
detail.</p>
<p>Here is the complete file of the data collector:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A simple data collector that prints all data when the simulation finishes.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">pprint</span>

<span class="kn">import</span> <span class="nn">mosaik_api</span>


<span class="n">META</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;models&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;Monitor&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;public&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;any_inputs&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;attrs&#39;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>


<span class="k">class</span> <span class="nc">Collector</span><span class="p">(</span><span class="n">mosaik_api</span><span class="o">.</span><span class="n">Simulator</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">META</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span>
                                            <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step_size</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sid</span><span class="p">,</span> <span class="n">step_size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step_size</span> <span class="o">=</span> <span class="n">step_size</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span>

    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Can only create one instance of Monitor.&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">eid</span> <span class="o">=</span> <span class="s1">&#39;Monitor&#39;</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;eid&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">model</span><span class="p">}]</span>

    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">eid</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">src</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">src</span><span class="p">][</span><span class="n">attr</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">time</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">step_size</span>

    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Collected data:&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sim</span><span class="p">,</span> <span class="n">sim_data</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;- </span><span class="si">%s</span><span class="s1">:&#39;</span> <span class="o">%</span> <span class="n">sim</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">values</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sim_data</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  - </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">mosaik_api</span><span class="o">.</span><span class="n">start_simulation</span><span class="p">(</span><span class="n">Collector</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="the-world">
<h2>The World<a class="headerlink" href="#the-world" title="Permalink to this headline">¶</a></h2>
<p>The next thing we do is instantiating a <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World" title="mosaik.scenario.World"><code class="xref py py-class docutils literal"><span class="pre">World</span></code></a> object. This object will
hold all simulation state. It knows which simulators are available and started,
which entities exist and how they are connected. It also provides most of the
functionality that you need for modelling your scenario:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mosaik</span>

<span class="n">world</span> <span class="o">=</span> <span class="n">mosaik</span><span class="o">.</span><span class="n">World</span><span class="p">(</span><span class="n">SIM_CONFIG</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="section" id="the-scenario">
<h2>The scenario<a class="headerlink" href="#the-scenario" title="Permalink to this headline">¶</a></h2>
<p>Before we can instantiate any simulation models, we first need to start the
respective simulators. This can be done by calling <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.start" title="mosaik.scenario.World.start"><code class="xref py py-meth docutils literal"><span class="pre">World.start()</span></code></a>. It
takes the name of the simulator to start and, optionally, some simulator
parameters which will be passed to the simulators <code class="docutils literal"><span class="pre">init()</span></code> method. So lets
start the example simulator and the HDF5 database adapter:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">examplesim</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s1">&#39;ExampleSim&#39;</span><span class="p">,</span> <span class="n">eid_prefix</span><span class="o">=</span><span class="s1">&#39;Model_&#39;</span><span class="p">)</span>
<span class="n">collector</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s1">&#39;Collector&#39;</span><span class="p">,</span> <span class="n">step_size</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

</pre></div>
</div>
<p>We also set the <em>eid_prefix</em> for our example simulator and some configuration
values for the database. It will collect data every minute until the simulation
ends. What gets returned by <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.start" title="mosaik.scenario.World.start"><code class="xref py py-meth docutils literal"><span class="pre">World.start()</span></code></a> is called a <em>model factory</em>.</p>
<p>We can use this factory object to create model instances within the respective
simulator. In your scenario, such an instance is represented as an
<a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.Entity" title="mosaik.scenario.Entity"><code class="xref py py-class docutils literal"><span class="pre">Entity</span></code></a>. The model factory presents the available models as if they
were classes within the factory&#8217;s namespace. So this how we can create one
instance of our example model and one database instance:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">examplesim</span><span class="o">.</span><span class="n">ExampleModel</span><span class="p">(</span><span class="n">init_val</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">monitor</span> <span class="o">=</span> <span class="n">collector</span><span class="o">.</span><span class="n">Monitor</span><span class="p">()</span>

</pre></div>
</div>
<p>The <em>init_val</em> parameter that we passed to <code class="docutils literal"><span class="pre">ExampleModel</span></code> is the same as in
the <code class="docutils literal"><span class="pre">create()</span></code> method of our Sim API implementation. Similarly, the database
has a parameter for its filename.</p>
<p>Now, we need to connect the example model to the monitor. That&#8217;s how we tell
mosaik to send the outputs of the example model to the monotir.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">world</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">monitor</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">,</span> <span class="s1">&#39;delta&#39;</span><span class="p">)</span>

</pre></div>
</div>
<p>The method <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.connect" title="mosaik.scenario.World.connect"><code class="xref py py-meth docutils literal"><span class="pre">World.connect()</span></code></a> takes one entity pair – the source and the
destination entity, as well as a list of attributes or attribute tuples. If you
only provide single attribute names, mosaik assumes that the source and
destination use the same attribute name. If they differ, you can instead pass
a tuple like <code class="docutils literal"><span class="pre">('val_out',</span> <span class="pre">'val_in')</span></code>.</p>
<p>Usually, you will neither create single entities nor connect single entity
pairs, but work with large(r) sets of entities. Mosaik allows you to easily
create multiple entities with the same parameters at once. It also provides
some utility functions for connecting sets of entities with each other. So lets
create two more entities and connect them to our monitor:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mosaik.util</span>

<span class="n">more_models</span> <span class="o">=</span> <span class="n">examplesim</span><span class="o">.</span><span class="n">ExampleModel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">mosaik</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">connect_many_to_one</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">more_models</span><span class="p">,</span> <span class="n">monitor</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">,</span> <span class="s1">&#39;delta&#39;</span><span class="p">)</span>

</pre></div>
</div>
<p>Instead of instantiating the example model directly, we called its static
method <code class="docutils literal"><span class="pre">create()</span></code> and passed the number of instances to it. It returns a list
of entities (nine in this case). We used the utility function
<a class="reference internal" href="../api_reference/mosaik.util.html#mosaik.util.connect_many_to_one" title="mosaik.util.connect_many_to_one"><code class="xref py py-func docutils literal"><span class="pre">mosaik.util.connect_many_to_one()</span></code></a> to connect all of them to the
database. This function has a similar signature as <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.connect" title="mosaik.scenario.World.connect"><code class="xref py py-meth docutils literal"><span class="pre">World.connect()</span></code></a>, but
the first two parameters are a <em>world</em> instance and a set (or list) of entities
that are all connected to the <em>dest_entity</em>.</p>
<p>Mosaik also provides the function <a class="reference internal" href="../api_reference/mosaik.util.html#mosaik.util.connect_randomly" title="mosaik.util.connect_randomly"><code class="xref py py-func docutils literal"><span class="pre">mosaik.util.connect_randomly()</span></code></a>. This
method randomly connects one set of entities to another set. These two methods
should cover most use cases. For more special ones, you can implement custom
functions based on the primitive <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.connect" title="mosaik.scenario.World.connect"><code class="xref py py-meth docutils literal"><span class="pre">World.connect()</span></code></a>.</p>
</div>
<div class="section" id="the-simulation">
<h2>The simulation<a class="headerlink" href="#the-simulation" title="Permalink to this headline">¶</a></h2>
<p>In order to start the simulation, we call <a class="reference internal" href="../api_reference/mosaik.scenario.html#mosaik.scenario.World.run" title="mosaik.scenario.World.run"><code class="xref py py-meth docutils literal"><span class="pre">World.run()</span></code></a> and specify for
how long we want our simulation to run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">world</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="n">END</span><span class="p">)</span>
</pre></div>
</div>
<p id="demo1-output">Executing the scenario script will then give us the following output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Starting</span> <span class="s2">&quot;ExampleSim&quot;</span> <span class="k">as</span> <span class="s2">&quot;ExampleSim-0&quot;</span> <span class="o">...</span>
<span class="n">Starting</span> <span class="s2">&quot;Collector&quot;</span> <span class="k">as</span> <span class="s2">&quot;Collector-0&quot;</span> <span class="o">...</span>
<span class="n">Starting</span> <span class="n">simulation</span><span class="o">.</span>
<span class="n">Progress</span><span class="p">:</span> <span class="mf">5.00</span><span class="o">%</span>
<span class="n">Progress</span><span class="p">:</span> <span class="mf">10.00</span><span class="o">%</span>
<span class="n">Progress</span><span class="p">:</span> <span class="mf">15.00</span><span class="o">%</span>
<span class="n">Progress</span><span class="p">:</span> <span class="mf">20.00</span><span class="o">%</span>
<span class="n">Progress</span><span class="p">:</span> <span class="mf">25.00</span><span class="o">%</span>
<span class="n">Progress</span><span class="p">:</span> <span class="mf">30.00</span><span class="o">%</span>
  <span class="o">-</span> <span class="n">delta</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
  <span class="o">-</span> <span class="n">val</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
<span class="o">-</span> <span class="n">ExampleSim</span><span class="o">-</span><span class="mf">0.</span><span class="n">Model_2</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">delta</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
  <span class="o">-</span> <span class="n">val</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This section introduced you to the basic of scenario creation in mosaik. For
more details you can check the <a class="reference internal" href="../scenario-definition.html"><span class="doc">guide to scenarios</span></a>.</p>
<p>For your convenience, here is the complete scenario that we created in this
tutorial. You can use this for some more experiments before continuing with
this tutorial:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># demo_1.py</span>
<span class="kn">import</span> <span class="nn">mosaik</span>
<span class="kn">import</span> <span class="nn">mosaik.util</span>


<span class="c1"># Sim config. and other parameters</span>
<span class="n">SIM_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ExampleSim&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;python&#39;</span><span class="p">:</span> <span class="s1">&#39;simulator_mosaik:ExampleSim&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s1">&#39;Collector&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;cmd&#39;</span><span class="p">:</span> <span class="s1">&#39;python collector.py </span><span class="si">%(addr)s</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="n">END</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">60</span>  <span class="c1"># 10 minutes</span>

<span class="c1"># Create World</span>
<span class="n">world</span> <span class="o">=</span> <span class="n">mosaik</span><span class="o">.</span><span class="n">World</span><span class="p">(</span><span class="n">SIM_CONFIG</span><span class="p">)</span>

<span class="c1"># Start simulators</span>
<span class="n">examplesim</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s1">&#39;ExampleSim&#39;</span><span class="p">,</span> <span class="n">eid_prefix</span><span class="o">=</span><span class="s1">&#39;Model_&#39;</span><span class="p">)</span>
<span class="n">collector</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s1">&#39;Collector&#39;</span><span class="p">,</span> <span class="n">step_size</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>

<span class="c1"># Instantiate models</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">examplesim</span><span class="o">.</span><span class="n">ExampleModel</span><span class="p">(</span><span class="n">init_val</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">monitor</span> <span class="o">=</span> <span class="n">collector</span><span class="o">.</span><span class="n">Monitor</span><span class="p">()</span>

<span class="c1"># Connect entities</span>
<span class="n">world</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">monitor</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">,</span> <span class="s1">&#39;delta&#39;</span><span class="p">)</span>

<span class="c1"># Create more entities</span>
<span class="n">more_models</span> <span class="o">=</span> <span class="n">examplesim</span><span class="o">.</span><span class="n">ExampleModel</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">init_val</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">mosaik</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">connect_many_to_one</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">more_models</span><span class="p">,</span> <span class="n">monitor</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">,</span> <span class="s1">&#39;delta&#39;</span><span class="p">)</span>

<span class="c1"># Run simulation</span>
<span class="n">world</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="n">END</span><span class="p">)</span>
</pre></div>
</div>
<p>The next part of the tutorial will be about integrating control mechanisms into
a simulation.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examplectrl.html" class="btn btn-neutral float-right" title="Adding a control mechanism to a scenario" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="examplesim.html" class="btn btn-neutral" title="Integrating a simulation model into the mosaik ecosystem" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2018 OFFIS.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.5.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   
  <!-- Piwik Image Tracker-->
  <img src="https://mosaik.offis.de/analytics/piwik.php?idsite=4&rec=1" style="border:0" alt="" />
  <!-- End Piwik -->
</body>
</html>