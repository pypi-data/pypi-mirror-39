import{readFileSync}from"fs";import{resolve,extname}from"path";import findup from"find-up";import merge from"deepmerge";import esm from"esm";const finds=e=>[`${e}.json`,`.${e}rc`,`${e}rc.js`,`${e}rc.json`,`${e}.config.js`,`${e}.config.json`],loadFile=(e,o={},r)=>{let n;const s=esm(module,{mode:"all",cache:!r,cjs:{cache:!r,namedExports:!0,vars:!0}});r&&e&&delete s.cache[resolve(e)];try{if(".js"===extname(e)){const o=s(e);n=o.default||o}else n=JSON.parse(readFileSync(e,"utf-8"))}catch(e){throw console.warn("There was an error loading your config:"),e}return n},load=(e,o={},r)=>{let n={};const s=findup.sync(finds(e));return s&&(n=loadFile(s,o,r)),null!==o?merge(o,n):n};export{finds,loadFile,load};
