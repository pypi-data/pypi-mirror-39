[
    {
        "name": "Basic validation rule",
        "description": "All Fedora object need to have a DC datastream",
        "level": "CRITICAL",
        "class": "pydial.checker.DatastreamValidationRule",
        "params":{
            "datastreams": ["DC"]
        }
    },
    {
        "name": "No MARCXML",
        "description": "Each research publication need to have a MARCXML datastream",
        "level": "CRITICAL",
        "class": "pydial.checker.DatastreamValidationRule",
        "params":{
            "datastreams": ["MARCXML"]
        },
        "conditions":[
            {
                "class": "pydial.checker.ContentModelConditionRule",
                "values": ["info:fedora/boreal-system:ResearchPublicationCM"]
            }
        ]
    },
    {
        "name": "No title",
        "description": "Each publication need a title",
        "level": "ERROR",
        "class": "pydial.checker.XPathValidationRule",
        "params":{
            "datastream": "MARCXML",
            "xpath": "//marc:datafield[@tag='245']/marc:subfield[@code='a']/text()",
            "namespaces": {"marc": "http://www.loc.gov/MARC21/slim"}
        },
        "conditions":[
            {
                "class": "pydial.checker.ContentModelConditionRule",
                "values": ["info:fedora/boreal-system:ResearchPublicationCM"]
            }
        ]
    },
    {
        "name": "At least one author",
        "description": "Each publication need at least one author",
        "level": "ERROR",
        "class": "pydial.checker.XPathValidationRule",
        "params":{
            "datastream": "MARCXML",
            "xpath": "//marc:datafield[@tag='100' or @tag='700']/marc:subfield[@code='a']/text()",
            "namespaces": {"marc": "http://www.loc.gov/MARC21/slim"}
        },
        "conditions":[
            {
                "class": "pydial.checker.ContentModelConditionRule",
                "values": ["info:fedora/boreal-system:ResearchPublicationCM"]
            }
        ]
    },
    {
        "name": "No affiliation",
        "description": "Each publication need at least one affiliations",
        "level": "ERROR",
        "class": "pydial.checker.XPathValidationRule",
        "params":{
            "datastream": "MARCXML",
            "xpath": "//marc:datafield[@tag='988'][marc:subfield[@code='a'] and marc:subfield[@code='b']]",
            "namespaces": {"marc": "http://www.loc.gov/MARC21/slim"}
        },
        "conditions":[
            {
                "class": "pydial.checker.ContentModelConditionRule",
                "values": ["info:fedora/boreal-system:ResearchPublicationCM"]
            }
        ]
    },
    {
        "name": "Check DOI",
        "description": "DOI of this publication isn't valid. Either DOI structure is incorrect (must start wiith \"10.\" string, either the DOI url check return an error",
        "level": "ERROR",
        "class": "pydial.checker.XPathValidationRule",
        "params":{
            "datastream": "MARCXML",
            "xpath": "//marc:datafield[@tag='856'][marc:subfield[@code='z']='DOI']/marc:subfield[@code='u']/text()",
            "namespaces": {"marc": "http://www.loc.gov/MARC21/slim"},
            "regexp": "^10\\.[0-9]{4,}"
        },
        "conditions":[
            {
                "class": "pydial.checker.ContentModelConditionRule",
                "values": ["info:fedora/boreal-system:ResearchPublicationCM"]
            },
            {
                "class": "pydial.checker.XPathConditionRule",
                "datastream": "MARCXML",
                "xpath": "//marc:datafield[@tag='856'][marc:subfield[@code='z']='DOI']/text()",
                "namespaces": {"marc": "http://www.loc.gov/MARC21/slim"}
            }
        ]
    },
    {
        "name": "At least one author for UCL/USL-B/UNamur",
        "description": "Each publication should have at least one author identify as UCL|USL-B|UNamur member",
        "level": "INFO",
        "class": "pydial.checker.XPathValidationRule",
        "params":{
            "datastream": "MARCXML",
            "xpath": "//marc:datafield[@tag='100' or @tag='700']/marc:subfield[@code='5']/text()",
            "namespaces": {"marc": "http://www.loc.gov/MARC21/slim"},
            "regexp": "UCL|USL-B|UNamur|FUSL|FUNDP|FUCAM",
            "any": true
        },
        "conditions":[
            {
                "class": "pydial.checker.ContentModelConditionRule",
                "values": ["info:fedora/boreal-system:ResearchPublicationCM"]
            }
        ]
    },
    {
        "name": "No fulltext",
        "description": "Each publication after 2013 should have an attached document",
        "level": "WARNING",
        "class": "pydial.checker.XPathValidationRule",
        "params":{
            "datastream": "MARCXML",
            "xpath": "//marc:datafield[@tag='506']/text()",
            "namespaces": {"marc": "http://www.loc.gov/MARC21/slim"}
        },
        "conditions":[
            {
                "class": "pydial.checker.ContentModelConditionRule",
                "values": ["info:fedora/boreal-system:ResearchPublicationCM"]
            },
            {
                "class": "pydial.checker.XPathConditionRule",
                "datastream": "MARCXML",
                "xpath": "//marc:datafield[@tag='260'][marc:subfield[@code='c']>=2013]/text()",
                "namespaces": {"marc": "http://www.loc.gov/MARC21/slim"}
            }
        ]
    },
    {
        "name": "No abstract",
        "description": "a publication without abstract has less chance to be get good referencing by search engines (Google, Bing, ...)",
        "level": "INFO",
        "class": "pydial.checker.XPathValidationRule",
        "params":{
            "datastream": "MARCXML",
            "xpath": "//marc:datafield[@tag='520']/marc:subfield[@code='a']/text()",
            "namespaces": {"marc": "http://www.loc.gov/MARC21/slim"}
        },
        "conditions":[
            {
                "class": "pydial.checker.ContentModelConditionRule",
                "values": ["info:fedora/boreal-system:ResearchPublicationCM"]
            }
        ]
    }
]