{% load humanize %}
<article class="results">
  {% if election.primary %}
  <header>
    <h4>Results</h4>
  </header>
  {% endif %}
  <section class="results-table">
    <table>
      <tr class="header results-table-row">
        <th class="vote-percent">Percent</th>
        <th class="candidate">Candidate</th>
        <th class="party">Party</th>
        <th class="vote-count">Votes</th>
        <th class="winning">Winner</th>
      </tr>
      {% for vote in election.votes_table|dictsortreversed:"count" %}
        <tr>
          <td class="vote-percent">{{ vote.pct|floatformat }}%</td>
          <td class="candidate">{{ vote.first }} {{ vote.last }}</td>
          <td class="party">{{ vote.party }}</td>
          <td class="vote-count">{{ vote.count|intcomma }}</td>
          <td class="winning">{% if vote.winner %}WINNER{% endif %}</td>
        </tr>
      {% endfor %}
    </table>
  </section>
</article>
