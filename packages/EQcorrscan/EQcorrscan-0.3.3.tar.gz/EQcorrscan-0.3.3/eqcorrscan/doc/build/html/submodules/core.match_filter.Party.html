

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.6.3.1.3. match_filter.Party &mdash; EQcorrscan 0.3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/EQcorrscan_logo.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="EQcorrscan 0.3.0 documentation" href="../index.html"/>
        <link rel="up" title="4.6.3. match_filter" href="core.match_filter.html"/>
        <link rel="next" title="4.6.3.1.4. match_filter.Template" href="core.match_filter.Template.html"/>
        <link rel="prev" title="4.6.3.1.2. match_filter.Family" href="core.match_filter.Family.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> EQcorrscan
          

          
            
            <img src="../_static/EQcorrscan_logo.jpg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction to the EQcorrscan package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. EQcorrscan installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates.html">3. What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">EQcorrscan tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../core.html">4. Core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core.html#brightness">4.1. Brightness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#template-generation">4.2. Template generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#matched-filter">4.3. Matched-Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#lag-calc">4.4. Lag-Calc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#subspace">4.5. Subspace</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../core.html#api-docs">4.6. API-docs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="core.bright_lights.html">4.6.1. bright_lights</a></li>
<li class="toctree-l3"><a class="reference internal" href="core.lag_calc.html">4.6.2. lag_calc</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="core.match_filter.html">4.6.3. match_filter</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="core.match_filter.html#classes">4.6.3.1. Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.match_filter.html#functions">4.6.3.2. Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.match_filter.html#private-functions">4.6.3.3. Private Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="core.subspace.html">4.6.4. subspace</a></li>
<li class="toctree-l3"><a class="reference internal" href="core.template_gen.html">4.6.5. template_gen</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">5. Utils</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EQcorrscan</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../core.html">4. Core</a> &raquo;</li>
        
          <li><a href="core.match_filter.html">4.6.3. match_filter</a> &raquo;</li>
        
      <li>4.6.3.1.3. match_filter.Party</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/submodules/core.match_filter.Party.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="match-filter-party">
<h1>4.6.3.1.3. match_filter.Party<a class="headerlink" href="#match-filter-party" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="eqcorrscan.core.match_filter.Party">
<em class="property">class </em><code class="descclassname">eqcorrscan.core.match_filter.</code><code class="descname">Party</code><span class="sig-paren">(</span><em>families=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Container for multiple Family objects.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.copy" title="eqcorrscan.core.match_filter.Party.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a>()</td>
<td>Returns a copy of the Party.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.filter" title="eqcorrscan.core.match_filter.Party.filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter</span></code></a>([dates,&nbsp;min_dets])</td>
<td>Return a new Party filtered according to conditions.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.plot" title="eqcorrscan.core.match_filter.Party.plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot</span></code></a>([plot_grouped,&nbsp;dates,&nbsp;min_dets,&nbsp;rate])</td>
<td>Plot the cumulative detections in time.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.decluster" title="eqcorrscan.core.match_filter.Party.decluster"><code class="xref py py-obj docutils literal notranslate"><span class="pre">decluster</span></code></a>(trig_int[,&nbsp;timing,&nbsp;metric])</td>
<td>De-cluster a Party of detections by enforcing a detection separation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.get_catalog" title="eqcorrscan.core.match_filter.Party.get_catalog"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_catalog</span></code></a>()</td>
<td>Get an obspy catalog object from the party.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.lag_calc" title="eqcorrscan.core.match_filter.Party.lag_calc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lag_calc</span></code></a>(stream,&nbsp;pre_processed[,&nbsp;shift_len,&nbsp;…])</td>
<td>Compute picks based on cross-correlation alignment.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.min_chans" title="eqcorrscan.core.match_filter.Party.min_chans"><code class="xref py py-obj docutils literal notranslate"><span class="pre">min_chans</span></code></a>(min_chans)</td>
<td>Remove detections with fewer channels used than min_chans</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.read" title="eqcorrscan.core.match_filter.Party.read"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read</span></code></a>([filename])</td>
<td>Read a Party from a file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.rethreshold" title="eqcorrscan.core.match_filter.Party.rethreshold"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rethreshold</span></code></a>(new_threshold[,&nbsp;new_threshold_type])</td>
<td>Remove detections from the Party that are below a new threshold.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.sort" title="eqcorrscan.core.match_filter.Party.sort"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sort</span></code></a>()</td>
<td>Sort the families by template name.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Party.write" title="eqcorrscan.core.match_filter.Party.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">write</span></code></a>(filename[,&nbsp;format,&nbsp;debug])</td>
<td>Write Family out, select output format.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>families=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate the Party object.</p>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of the Party.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Copy of party</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">Party</span><span class="p">(</span><span class="n">families</span><span class="o">=</span><span class="p">[</span><span class="n">Family</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">Template</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">party_b</span> <span class="o">=</span> <span class="n">party</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">==</span> <span class="n">party_b</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.filter">
<code class="descname">filter</code><span class="sig-paren">(</span><em>dates=None</em>, <em>min_dets=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new Party filtered according to conditions.</p>
<p>Return a new Party with only detections within a date range and
only families with a minimum number of detections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dates</strong> (<em>list of obspy.core.UTCDateTime objects</em>) – A start and end date for the new Party</li>
<li><strong>min_dets</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Minimum number of detections per family</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">obspy</span> <span class="k">import</span> <span class="n">UTCDateTime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">dates</span><span class="o">=</span><span class="p">[</span><span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                             <span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)],</span>
<span class="gp">... </span>                      <span class="n">min_dets</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span> 
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>plot_grouped=False</em>, <em>dates=None</em>, <em>min_dets=1</em>, <em>rate=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the cumulative detections in time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>plot_grouped</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Whether to plot all families together (plot_grouped=True), or each
as a separate line.</li>
<li><strong>dates</strong> (<em>list</em>) – list of obspy.core.UTCDateTime objects bounding the
plot. The first should be the start date, the last the end date.</li>
<li><strong>min_dets</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Plot only families with this number of detections
or more.</li>
<li><strong>rate</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Whether or not to plot the daily rate of detection as
opposed to cumulative number. Only works with plot_grouped=True.</li>
<li><strong>**kwargs</strong> – Any other arguments accepted by
<a class="reference internal" href="autogen/eqcorrscan.utils.plotting.cumulative_detections.html#eqcorrscan.utils.plotting.cumulative_detections" title="eqcorrscan.utils.plotting.cumulative_detections"><code class="xref py py-func docutils literal notranslate"><span class="pre">eqcorrscan.utils.plotting.cumulative_detections()</span></code></a></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Plot cumulative detections for all templates individually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>  
</pre></div>
</div>
<p>Plot cumulative detections for all templates grouped together:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">plot_grouped</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
</pre></div>
</div>
<p>Plot the rate of detection for all templates grouped together:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">plot_grouped</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
</pre></div>
</div>
<p>Plot cumulative detections for all templates with more than five
detections between June 1st, 2012 and July 31st, 2012:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">obspy</span> <span class="k">import</span> <span class="n">UTCDateTime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates</span><span class="o">=</span><span class="p">[</span><span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>                           <span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">31</span><span class="p">)],</span>
<span class="gp">... </span>                    <span class="n">min_dets</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> 
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.decluster">
<code class="descname">decluster</code><span class="sig-paren">(</span><em>trig_int</em>, <em>timing='detect'</em>, <em>metric='avg_cor'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.decluster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.decluster" title="Permalink to this definition">¶</a></dt>
<dd><p>De-cluster a Party of detections by enforcing a detection separation.</p>
<p>De-clustering occurs between events detected by different (or the same)
templates. If multiple detections occur within trig_int then the
preferred detection will be determined by the metric argument. This
can be either the average single-station correlation coefficient which
is calculated as Detection.detect_val / Detection.no_chans, or the
raw cross channel correlation sum which is simply Detection.detect_val.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>trig_int</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Minimum detection separation in seconds.</li>
<li><strong>metric</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – What metric to sort peaks by. Either ‘avg_cor’ which
takes the single station average correlation or ‘cor_sum’ which
takes the total correlation sum across all channels.</li>
<li><strong>timing</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Either ‘detect’ or ‘origin’ to decluster based on either the
detection time or the origin time.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Works in place on object, if you need to keep the original safe
then run this on a copy of the object!</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">party</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">declustered</span> <span class="o">=</span> <span class="n">party</span><span class="o">.</span><span class="n">decluster</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">party</span><span class="p">)</span>
<span class="go">3</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.get_catalog">
<code class="descname">get_catalog</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.get_catalog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.get_catalog" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an obspy catalog object from the party.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.event.Catalog.html#obspy.core.event.Catalog" title="(in ObsPy Documentation (1.1.0) v1.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">obspy.core.event.Catalog</span></code></a></td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cat</span> <span class="o">=</span> <span class="n">party</span><span class="o">.</span><span class="n">get_catalog</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cat</span><span class="p">))</span>
<span class="go">4</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.lag_calc">
<code class="descname">lag_calc</code><span class="sig-paren">(</span><em>stream, pre_processed, shift_len=0.2, min_cc=0.4, horizontal_chans=['E', 'N', '1', '2'], vertical_chans=['Z'], cores=1, interpolate=False, plot=False, parallel=True, overlap='calculate', debug=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.lag_calc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.lag_calc" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute picks based on cross-correlation alignment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stream</strong> (<a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (1.1.0) v1.1)"><em>obspy.core.stream.Stream</em></a>) – All the data needed to cut from - can be a gappy Stream.</li>
<li><strong>pre_processed</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Whether the stream has been pre-processed or not to match the
templates. See note below.</li>
<li><strong>shift_len</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Shift length allowed for the pick in seconds, will be plus/minus
this amount - default=0.2</li>
<li><strong>min_cc</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Minimum cross-correlation value to be considered a pick,
default=0.4.</li>
<li><strong>horizontal_chans</strong> (<em>list</em>) – List of channel endings for horizontal-channels, on which S-picks
will be made.</li>
<li><strong>vertical_chans</strong> (<em>list</em>) – List of channel endings for vertical-channels, on which P-picks
will be made.</li>
<li><strong>cores</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Number of cores to use in parallel processing, defaults to one.</li>
<li><strong>interpolate</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Interpolate the correlation function to achieve sub-sample
precision.</li>
<li><strong>plot</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – To generate a plot for every detection or not, defaults to False</li>
<li><strong>parallel</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Turn parallel processing on or off.</li>
<li><strong>overlap</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Either None, “calculate” or a float of number of seconds to
overlap detection streams by.  This is to counter the effects of
the delay-and-stack in calcualting cross-correlation sums. Setting
overlap = “calculate” will work out the appropriate overlap based
on the maximum lags within templates.</li>
<li><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Debug output level, 0-5 with 5 being the most output.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Catalog of events with picks.  No origin information is included.
These events can then be written out via
<code class="xref py py-func docutils literal notranslate"><span class="pre">obspy.core.event.Catalog.write()</span></code>, or to Nordic Sfiles using
<code class="xref py py-func docutils literal notranslate"><span class="pre">eqcorrscan.utils.sfile_util.eventtosfile()</span></code> and located
externally.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.obspy.org/packages/autogen/obspy.core.event.Catalog.html#obspy.core.event.Catalog" title="(in ObsPy Documentation (1.1.0) v1.1)">obspy.core.event.Catalog</a></p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note on pre-processing: You can provide a pre-processed stream,
which may be beneficial for detections over large time periods
(the stream can have gaps, which reduces memory usage).  However,
in this case the processing steps are not checked, so you must
ensure that all the template in the Party have the same sampling
rate and filtering as the stream.
If pre-processing has not be done then the data will be processed
according to the parameters in the templates, in this case
templates will be grouped by processing parameters and run with
similarly processed data.  In this case, all templates do not have
to have the same processing parameters.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Picks are corrected for the template pre-pick time.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.min_chans">
<code class="descname">min_chans</code><span class="sig-paren">(</span><em>min_chans</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.min_chans"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.min_chans" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove detections with fewer channels used than min_chans</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>min_chans</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Minimum number of channels to allow a detection.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Party</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Works in place on Party.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">party</span><span class="p">))</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">party</span><span class="o">.</span><span class="n">min_chans</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">party</span><span class="p">))</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>filename=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a Party from a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – File to read from</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">Party of 4 Families.</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.rethreshold">
<code class="descname">rethreshold</code><span class="sig-paren">(</span><em>new_threshold</em>, <em>new_threshold_type='MAD'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.rethreshold"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.rethreshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove detections from the Party that are below a new threshold.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">threshold can only be set higher.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Works in place on Party.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>new_threshold</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – New threshold level</li>
<li><strong>new_threshold_type</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Either ‘MAD’, ‘absolute’ or ‘av_chan_corr’</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Using the MAD threshold on detections made using the MAD threshold:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">party</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">party</span><span class="o">.</span><span class="n">rethreshold</span><span class="p">(</span><span class="mf">10.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">party</span><span class="p">)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Note that all detections are self detections</span>
</pre></div>
</div>
<p>Using the absolute thresholding method on the same Party:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">rethreshold</span><span class="p">(</span><span class="mf">6.0</span><span class="p">,</span> <span class="s1">&#39;absolute&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">party</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Using the av_chan_corr method on the same Party:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">rethreshold</span><span class="p">(</span><span class="mf">0.9</span><span class="p">,</span> <span class="s1">&#39;av_chan_corr&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">party</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.sort">
<code class="descname">sort</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.sort"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the families by template name.</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">Party</span><span class="p">(</span><span class="n">families</span><span class="o">=</span><span class="p">[</span><span class="n">Family</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">Template</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)),</span>
<span class="gp">... </span>                        <span class="n">Family</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">Template</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">party</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">Family of 0 detections from template b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">party</span><span class="o">.</span><span class="n">sort</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">Family of 0 detections from template a</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Party.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>filename</em>, <em>format='tar'</em>, <em>debug=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Party.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Party.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write Family out, select output format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>format</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – One of either ‘tar’, ‘csv’, or any obspy supported
catalog output. See note below on formats</li>
<li><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Path to write file to.</li>
<li><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Whether to output progress or not.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">csv format will write out detection objects, all other
outputs will write the catalog.  These cannot be rebuilt into
a Family object.  The only format that can be read back into
Family objects is the ‘tar’ type.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We recommend writing to the ‘tar’ format, which will write out
all the template information (wavefiles as miniseed and metadata)
alongside the detections and store these in a tar archive. This
is readable by other programs and maintains all information
required for further study.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">party</span> <span class="o">=</span> <span class="n">Party</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">party</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test_tar_write&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;tar&#39;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Writing family 0</span>
<span class="go">Writing family 1</span>
<span class="go">Writing family 2</span>
<span class="go">Writing family 3</span>
<span class="go">Party of 4 Families.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">party</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test_csv_write.csv&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;csv&#39;</span><span class="p">)</span>
<span class="go">Party of 4 Families.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">party</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test_quakeml.xml&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;quakeml&#39;</span><span class="p">)</span>
<span class="go">Party of 4 Families.</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="core.match_filter.Template.html" class="btn btn-neutral float-right" title="4.6.3.1.4. match_filter.Template" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="core.match_filter.Family.html" class="btn btn-neutral" title="4.6.3.1.2. match_filter.Family" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, 2016: EQcorrscan developers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>