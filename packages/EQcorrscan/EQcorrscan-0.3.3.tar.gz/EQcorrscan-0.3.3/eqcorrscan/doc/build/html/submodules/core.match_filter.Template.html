

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4.6.3.1.4. match_filter.Template &mdash; EQcorrscan 0.3.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/EQcorrscan_logo.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="EQcorrscan 0.3.0 documentation" href="../index.html"/>
        <link rel="up" title="4.6.3. match_filter" href="core.match_filter.html"/>
        <link rel="next" title="4.6.3.1.5. match_filter.Tribe" href="core.match_filter.Tribe.html"/>
        <link rel="prev" title="4.6.3.1.3. match_filter.Party" href="core.match_filter.Party.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> EQcorrscan
          

          
            
            <img src="../_static/EQcorrscan_logo.jpg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction to the EQcorrscan package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. EQcorrscan installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates.html">3. What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">EQcorrscan tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../core.html">4. Core</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core.html#brightness">4.1. Brightness</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#template-generation">4.2. Template generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#matched-filter">4.3. Matched-Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#lag-calc">4.4. Lag-Calc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#subspace">4.5. Subspace</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../core.html#api-docs">4.6. API-docs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="core.bright_lights.html">4.6.1. bright_lights</a></li>
<li class="toctree-l3"><a class="reference internal" href="core.lag_calc.html">4.6.2. lag_calc</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="core.match_filter.html">4.6.3. match_filter</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="core.match_filter.html#classes">4.6.3.1. Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.match_filter.html#functions">4.6.3.2. Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="core.match_filter.html#private-functions">4.6.3.3. Private Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="core.subspace.html">4.6.4. subspace</a></li>
<li class="toctree-l3"><a class="reference internal" href="core.template_gen.html">4.6.5. template_gen</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">5. Utils</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EQcorrscan</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../core.html">4. Core</a> &raquo;</li>
        
          <li><a href="core.match_filter.html">4.6.3. match_filter</a> &raquo;</li>
        
      <li>4.6.3.1.4. match_filter.Template</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/submodules/core.match_filter.Template.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="match-filter-template">
<h1>4.6.3.1.4. match_filter.Template<a class="headerlink" href="#match-filter-template" title="Permalink to this headline">¶</a></h1>
<p>See notes and warnings on correlations here: <a class="reference external" href="utils.correlate.html#notes-on-accuracy">correlation_warnings</a></p>
<dl class="class">
<dt id="eqcorrscan.core.match_filter.Template">
<em class="property">class </em><code class="descclassname">eqcorrscan.core.match_filter.</code><code class="descname">Template</code><span class="sig-paren">(</span><em>name=None</em>, <em>st=None</em>, <em>lowcut=None</em>, <em>highcut=None</em>, <em>samp_rate=None</em>, <em>filt_order=None</em>, <em>process_length=None</em>, <em>prepick=None</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Template" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Template object holder.</p>
<p>Contains waveform data and metadata parameters used to generate the
template.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Template.construct" title="eqcorrscan.core.match_filter.Template.construct"><code class="xref py py-obj docutils literal notranslate"><span class="pre">construct</span></code></a>(method,&nbsp;name,&nbsp;lowcut,&nbsp;highcut,&nbsp;…)</td>
<td>Construct a template using a given method.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Template.copy" title="eqcorrscan.core.match_filter.Template.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a>()</td>
<td>Returns a copy of the template.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Template.detect" title="eqcorrscan.core.match_filter.Template.detect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">detect</span></code></a>(stream,&nbsp;threshold,&nbsp;threshold_type,&nbsp;…)</td>
<td>Detect using a single template within a continuous stream.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Template.read" title="eqcorrscan.core.match_filter.Template.read"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read</span></code></a>(filename)</td>
<td>Read template from tar format with metadata.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Template.same_processing" title="eqcorrscan.core.match_filter.Template.same_processing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">same_processing</span></code></a>(other)</td>
<td>Check is the templates are processed the same.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#eqcorrscan.core.match_filter.Template.write" title="eqcorrscan.core.match_filter.Template.write"><code class="xref py py-obj docutils literal notranslate"><span class="pre">write</span></code></a>(filename[,&nbsp;format])</td>
<td>Write template.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="eqcorrscan.core.match_filter.Template.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>name=None</em>, <em>st=None</em>, <em>lowcut=None</em>, <em>highcut=None</em>, <em>samp_rate=None</em>, <em>filt_order=None</em>, <em>process_length=None</em>, <em>prepick=None</em>, <em>event=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Template.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Template.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Template.construct">
<code class="descname">construct</code><span class="sig-paren">(</span><em>method</em>, <em>name</em>, <em>lowcut</em>, <em>highcut</em>, <em>samp_rate</em>, <em>filt_order</em>, <em>prepick</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Template.construct"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Template.construct" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a template using a given method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>method</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Method to make the template,
see <a class="reference internal" href="core.template_gen.html#module-eqcorrscan.core.template_gen" title="eqcorrscan.core.template_gen"><code class="xref py py-mod docutils literal notranslate"><span class="pre">eqcorrscan.core.template_gen</span></code></a> for possible methods.</li>
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Name for the template</li>
<li><strong>lowcut</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Low cut (Hz), if set to None will not apply a lowcut</li>
<li><strong>highcut</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – High cut (Hz), if set to None will not apply a highcut.</li>
<li><strong>samp_rate</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – New sampling rate in Hz.</li>
<li><strong>filt_order</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Filter level (number of corners).</li>
<li><strong>prepick</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Pre-pick time in seconds</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">methods <cite>from_meta_file</cite>, <cite>from_seishub</cite>, <cite>from_client</cite> and
<cite>multi_template_gen</cite> are not accommodated in this function and must
be called from Tribe.construct as these generate multiple
templates.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Calls functions from <cite>eqcorrscan.core.template_gen</cite>, see these
functions for details on what further arguments are required.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sac_files</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;eqcorrscan/tests/test_data/SAC/2014p611252/*&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;from_sac&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">lowcut</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">highcut</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">samp_rate</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">filt_order</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">prepick</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">swin</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">length</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">sac_files</span><span class="o">=</span><span class="n">sac_files</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">template</span><span class="p">)</span> 
<span class="go">Template test:</span>
<span class="go"> 12 channels;</span>
<span class="go"> lowcut: 2.0 Hz;</span>
<span class="go"> highcut: 8.0 Hz;</span>
<span class="go"> sampling rate 20.0 Hz;</span>
<span class="go"> filter order: 4;</span>
<span class="go"> process length: 300.0 s</span>
</pre></div>
</div>
<p>This will raise an error if the method is unsupported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">construct</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">method</span><span class="o">=</span><span class="s1">&#39;from_meta_file&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">lowcut</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">highcut</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">samp_rate</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span> <span class="n">filt_order</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">prepick</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">swin</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">length</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">NotImplementedError</span>: <span class="n">Method is not supported, use         Tribe.construct instead.</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Template.copy">
<code class="descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Template.copy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Template.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of the template.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Copy of template</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">st</span><span class="o">=</span><span class="n">read</span><span class="p">(),</span> <span class="n">lowcut</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">highcut</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span> <span class="n">samp_rate</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">filt_order</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">process_length</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span> <span class="n">prepick</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_b</span> <span class="o">=</span> <span class="n">template_a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span> <span class="o">==</span> <span class="n">template_b</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Template.detect">
<code class="descname">detect</code><span class="sig-paren">(</span><em>stream</em>, <em>threshold</em>, <em>threshold_type</em>, <em>trig_int</em>, <em>plotvar</em>, <em>pre_processed=False</em>, <em>daylong=False</em>, <em>parallel_process=True</em>, <em>xcorr_func=None</em>, <em>concurrency=None</em>, <em>cores=None</em>, <em>ignore_length=False</em>, <em>overlap='calculate'</em>, <em>debug=0</em>, <em>full_peaks=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Template.detect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Template.detect" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect using a single template within a continuous stream.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>stream</strong> (<cite>obspy.core.stream.Stream</cite>) – Continuous data to detect within using the Template.</li>
<li><strong>threshold</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Threshold level, if using <cite>threshold_type=’MAD’</cite> then this will be
the multiple of the median absolute deviation.</li>
<li><strong>threshold_type</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The type of threshold to be used, can be MAD, absolute or
av_chan_corr.  See Note on thresholding below.</li>
<li><strong>trig_int</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Minimum gap between detections in seconds. If multiple detections
occur within trig_int of one-another, the one with the highest
cross-correlation sum will be selected.</li>
<li><strong>plotvar</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Turn plotting on or off, see warning about plotting below</li>
<li><strong>pre_processed</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Set to True if <cite>stream</cite> has already undergone processing, in this
case eqcorrscan will only check that the sampling rate is correct.
Defaults to False, which will use the
<a class="reference internal" href="utils.pre_processing.html#module-eqcorrscan.utils.pre_processing" title="eqcorrscan.utils.pre_processing"><code class="xref py py-mod docutils literal notranslate"><span class="pre">eqcorrscan.utils.pre_processing</span></code></a> routines to resample and
filter the continuous data.</li>
<li><strong>daylong</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Set to True to use the
<a class="reference internal" href="autogen/eqcorrscan.utils.pre_processing.dayproc.html#eqcorrscan.utils.pre_processing.dayproc" title="eqcorrscan.utils.pre_processing.dayproc"><code class="xref py py-func docutils literal notranslate"><span class="pre">eqcorrscan.utils.pre_processing.dayproc()</span></code></a> routine, which
preforms additional checks and is more efficient for day-long data
over other methods.</li>
<li><strong>parallel_process</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – </li>
<li><strong>xcorr_func</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a><em> or </em><em>callable</em>) – A str of a registered xcorr function or a callable for implementing
a custom xcorr function. For more details see
<a class="reference internal" href="autogen/eqcorrscan.utils.correlate.register_array_xcorr.html#eqcorrscan.utils.correlate.register_array_xcorr" title="eqcorrscan.utils.correlate.register_array_xcorr"><code class="xref py py-func docutils literal notranslate"><span class="pre">eqcorrscan.utils.correlate.register_array_xcorr()</span></code></a>.</li>
<li><strong>concurrency</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The type of concurrency to apply to the xcorr function. Options are
‘multithread’, ‘multiprocess’, ‘concurrent’. For more details see
<a class="reference internal" href="autogen/eqcorrscan.utils.correlate.get_stream_xcorr.html#eqcorrscan.utils.correlate.get_stream_xcorr" title="eqcorrscan.utils.correlate.get_stream_xcorr"><code class="xref py py-func docutils literal notranslate"><span class="pre">eqcorrscan.utils.correlate.get_stream_xcorr()</span></code></a>.</li>
<li><strong>cores</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Number of workers for processing and detection.</li>
<li><strong>ignore_length</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If using daylong=True, then dayproc will try check that the data
are there for at least 80% of the day, if you don’t want this check
(which will raise an error if too much data are missing) then set
ignore_length=True.  This is not recommended!</li>
<li><strong>overlap</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Either None, “calculate” or a float of number of seconds to
overlap detection streams by.  This is to counter the effects of
the delay-and-stack in calcualting cross-correlation sums. Setting
overlap = “calculate” will work out the appropriate overlap based
on the maximum lags within templates.</li>
<li><strong>debug</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Debug level from 0-5 where five is more output, for debug levels
4 and 5, detections will not be computed in parallel.</li>
<li><strong>full_peaks</strong> – See <cite>eqcorrscan.utils.findpeaks.find_peaks2_short</cite></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Family of detections.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Plotting within the match-filter routine uses the Agg backend
with interactive plotting turned off.  This is because the function
is designed to work in bulk.  If you wish to turn interactive
plotting on you must import matplotlib in your script first, when
you then import match_filter you will get the warning that this
call to matplotlib has no effect, which will mean that
match_filter has not changed the plotting behaviour.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Data overlap:</strong></p>
<p>Internally this routine shifts and trims the data according to
the offsets in the template (e.g. if trace 2 starts 2 seconds
after trace 1 in the template then the continuous data will be
shifted by 2 seconds to align peak correlations prior to summing).
Because of this, detections at the start and end of continuous data
streams <strong>may be missed</strong>.  The maximum time-period that might be
missing detections is the maximum offset in the template.</p>
<p class="last">To work around this, if you are conducting matched-filter
detections through long-duration continuous data, we suggest using
some overlap (a few seconds, on the order of the maximum offset
in the templates) in the continous data.  You will then need to
post-process the detections (which should be done anyway to remove
duplicates).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Thresholding:</strong></p>
<p><strong>MAD</strong> threshold is calculated as the:</p>
<div class="math notranslate">
\[threshold {\times} (median(abs(cccsum)))\]</div>
<p>where <span class="math notranslate">\(cccsum\)</span> is the cross-correlation sum for a
given template.</p>
<p><strong>absolute</strong> threshold is a true absolute threshold based on the
cccsum value.</p>
<p><strong>av_chan_corr</strong> is based on the mean values of single-channel
cross-correlations assuming all data are present as required
for the template, e.g:</p>
<div class="math notranslate">
\[av\_chan\_corr\_thresh=threshold \times (cccsum /
len(template))\]</div>
<p class="last">where <span class="math notranslate">\(template\)</span> is a single template from the input and the
length is the number of channels within this template.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See tutorials for example.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Template.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Template.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Template.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read template from tar format with metadata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Filename to read template from.</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">st</span><span class="o">=</span><span class="n">read</span><span class="p">(),</span> <span class="n">lowcut</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">highcut</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span> <span class="n">samp_rate</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">filt_order</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">process_length</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span> <span class="n">prepick</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;test_template_read&#39;</span><span class="p">)</span> 
<span class="go">Template a:</span>
<span class="go"> 3 channels;</span>
<span class="go"> lowcut: 2.0 Hz;</span>
<span class="go"> highcut: 8.0 Hz;</span>
<span class="go"> sampling rate 100 Hz;</span>
<span class="go"> filter order: 4;</span>
<span class="go"> process length: 3600 s</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_b</span> <span class="o">=</span> <span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;test_template_read.tgz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span> <span class="o">==</span> <span class="n">template_b</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Template.same_processing">
<code class="descname">same_processing</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Template.same_processing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Template.same_processing" title="Permalink to this definition">¶</a></dt>
<dd><p>Check is the templates are processed the same.</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">st</span><span class="o">=</span><span class="n">read</span><span class="p">(),</span> <span class="n">lowcut</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">highcut</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span> <span class="n">samp_rate</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">filt_order</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">process_length</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span> <span class="n">prepick</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_b</span> <span class="o">=</span> <span class="n">template_a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span><span class="o">.</span><span class="n">same_processing</span><span class="p">(</span><span class="n">template_b</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_b</span><span class="o">.</span><span class="n">lowcut</span> <span class="o">=</span> <span class="mf">5.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span><span class="o">.</span><span class="n">same_processing</span><span class="p">(</span><span class="n">template_b</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="eqcorrscan.core.match_filter.Template.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>filename</em>, <em>format='tar'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/eqcorrscan/core/match_filter.html#Template.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.core.match_filter.Template.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write template.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Filename to write to, if it already exists it will be opened and
appended to, otherwise it will be created.</li>
<li><strong>format</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Format to write to, either ‘tar’ (to retain metadata), or any obspy
supported waveform format to just extract the waveform.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">st</span><span class="o">=</span><span class="n">read</span><span class="p">(),</span> <span class="n">lowcut</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">highcut</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span> <span class="n">samp_rate</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">filt_order</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">process_length</span><span class="o">=</span><span class="mi">3600</span><span class="p">,</span> <span class="n">prepick</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test_template&#39;</span><span class="p">)</span> 
<span class="go">Template a:</span>
<span class="go"> 3 channels;</span>
<span class="go"> lowcut: 2.0 Hz;</span>
<span class="go"> highcut: 8.0 Hz;</span>
<span class="go"> sampling rate 100 Hz;</span>
<span class="go"> filter order: 4;</span>
<span class="go"> process length: 3600 s</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template_a</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;test_waveform.ms&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;MSEED&#39;</span><span class="p">)</span> 
<span class="go">Template a:</span>
<span class="go"> 3 channels;</span>
<span class="go"> lowcut: 2.0 Hz;</span>
<span class="go"> highcut: 8.0 Hz;</span>
<span class="go"> sampling rate 100 Hz;</span>
<span class="go"> filter order: 4;</span>
<span class="go"> process length: 3600 s</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="core.match_filter.Tribe.html" class="btn btn-neutral float-right" title="4.6.3.1.5. match_filter.Tribe" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="core.match_filter.Party.html" class="btn btn-neutral" title="4.6.3.1.3. match_filter.Party" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, 2016: EQcorrscan developers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>