(function(){if(window.DMP_CONTEXT){return;}
window.DMP_CONTEXT={__version__:'5.7.1',contexts:{},contextsByName:{},lastContext:null,bundleFunctions:{},set:function(version,contextid,data,templates){if(DMP_CONTEXT.__version__!=version){console.warn('DMP framework version is '+version+', while dmp-common.js is '+DMP_CONTEXT.__version__+'. Unexpected behavior may occur.');}
DMP_CONTEXT.contexts[contextid]={id:contextid,data:data,templates:templates,triggered:false};DMP_CONTEXT.lastContext=DMP_CONTEXT.contexts[contextid];for(var i=0;i<templates.length;i++){if(DMP_CONTEXT.contextsByName[templates[i]]===undefined){DMP_CONTEXT.contextsByName[templates[i]]=[];}
DMP_CONTEXT.contextsByName[templates[i]].push(contextid);}},get:function(option){var ret=DMP_CONTEXT.getAll(option);if(ret.length==0){return undefined;}
return ret[ret.length-1];},getAll:function(option){var ret=[];if(!option&&document.currentScript&&document.currentScript.getAttribute('data-context')){option=document.currentScript;}
if(!option&&DMP_CONTEXT.lastContext){ret.push(DMP_CONTEXT.lastContext.data);}
else if(typeof option==='string'||option instanceof String){var namemap=DMP_CONTEXT.contextsByName[option];if(namemap!==undefined){for(var i=0;i<namemap.length;i++){var c=DMP_CONTEXT.contexts[namemap[i]];if(c!==undefined){ret.push(c.data);}}}}
else if(option.nodeType===1&&option.nodeName.toLowerCase()=='script'&&option.getAttribute('data-context')){var c=DMP_CONTEXT.contexts[option.getAttribute('data-context')];if(c!==undefined){ret.push(c.data);}}
return ret;},linkBundleFunction(template,func){DMP_CONTEXT.bundleFunctions[template]=func;},triggerBundle(contextid){var context=DMP_CONTEXT.contexts[contextid];if(!context||context.triggered){return;}
for(var i=0;i<context.templates.length;i++){var template=context.templates[i];if(!DMP_CONTEXT.bundleFunctions[template]){return;}}
context.triggered=true;for(var i=0;i<context.templates.length;i++){var template=context.templates[i];DMP_CONTEXT.bundleFunctions[template]();}}};})()